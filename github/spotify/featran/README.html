<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-featran" class="anchor" href="https://github.com/spotify/featran#featran" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>featran</h1> 
  <p><a href="https://travis-ci.org/spotify/featran" target="_blank"><img src="https://camo.githubusercontent.com/7f1871c3d4fa2737491301e59349bceb8cec73e8/68747470733a2f2f7472617669732d63692e6f72672f73706f746966792f6665617472616e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/spotify/featran.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/github/spotify/featran?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/9e558da2951564a8b1816190b7910335f210877e/68747470733a2f2f636f6465636f762e696f2f6769746875622f73706f746966792f6665617472616e2f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="https://codecov.io/github/spotify/featran/coverage.svg?branch=master" style="max-width:100%;"></a> <a href="https://github.com/spotify/featran/blob/master/LICENSE" target="_blank"><img src="https://camo.githubusercontent.com/c6d2cb61d3d61be3e8c292debc5368a0df7cca15/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f73706f746966792f6665617472616e2e737667" alt="GitHub license" data-canonical-src="https://img.shields.io/github/license/spotify/featran.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.spotify/featran-core_2.11" target="_blank"><img src="https://camo.githubusercontent.com/490933f08b864ff3fdbacc85a6110f749cee691b/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e73706f746966792f6665617472616e2d636f72655f322e31312e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/com.spotify/featran-core_2.11.svg" style="max-width:100%;"></a></p> 
  <p>Featran, also known as Featran77 or F77 (get it?), is a Scala library for feature transformation. It aims to simplify the time consuming task of feature engineering in data science and machine learning processes. It supports various collection types for feature extraction and output formats for feature representation.</p> 
  <h1><a id="user-content-introduction" class="anchor" href="https://github.com/spotify/featran#introduction" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Introduction</h1> 
  <p>Most feature transformation logic requires two steps, one global aggregation to summarize data followed by one element-wise mapping to transform them. For example:</p> 
  <ul> 
   <li>Min-Max Scaler 
    <ul> 
     <li>Aggregation: global min &amp; max</li> 
     <li>Mapping: scale each value to <code>[min, max]</code></li> 
    </ul> </li> 
   <li>One-Hot Encoder 
    <ul> 
     <li>Aggregation: distinct labels</li> 
     <li>Mapping: convert each label to a binary vector</li> 
    </ul> </li> 
  </ul> 
  <p>We can implement this in a naive way using <code>reduce</code> and <code>map</code>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Point</span>(<span class="pl-v">score</span>: <span class="pl-k">Double</span>, <span class="pl-v">label</span>: <span class="pl-k">String</span>)
<span class="pl-k">val</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-en">Point</span>(<span class="pl-c1">1.0</span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>), <span class="pl-en">Point</span>(<span class="pl-c1">2.0</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>), <span class="pl-en">Point</span>(<span class="pl-c1">3.0</span>, <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>))

<span class="pl-k">val</span> <span class="pl-en">a</span> <span class="pl-k">=</span> data
  .map(p <span class="pl-k">=&gt;</span> (p.score, p.score, <span class="pl-en">Set</span>(p.label)))
  .reduce((x, y) <span class="pl-k">=&gt;</span> (math.min(x._1, y._1), math.max(x._2, y._2), x._3 <span class="pl-k">++</span> y._3))

<span class="pl-k">val</span> <span class="pl-en">features</span> <span class="pl-k">=</span> data.map { p <span class="pl-k">=&gt;</span>
  (p.score <span class="pl-k">-</span> a._1) <span class="pl-k">/</span> (a._2 <span class="pl-k">-</span> a._1) <span class="pl-k">::</span> a._3.toList.sorted.map(s <span class="pl-k">=&gt;</span> <span class="pl-k">if</span> (s <span class="pl-k">==</span> p.label) <span class="pl-c1">1.0</span> <span class="pl-k">else</span> <span class="pl-c1">0.0</span>)
}</pre>
  </div> 
  <p>But this is unmanageable for complex feature sets. The above logic can be easily expressed in Featran.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.spotify.featran.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.spotify.featran.transformers.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">fs</span> <span class="pl-k">=</span> <span class="pl-en">FeatureSpec</span>.of[<span class="pl-en">Point</span>]
  .required(_.score)(<span class="pl-en">MinMaxScaler</span>(<span class="pl-s"><span class="pl-pds">"</span>min-max<span class="pl-pds">"</span></span>))
  .required(_.label)(<span class="pl-en">OneHotEncoder</span>(<span class="pl-s"><span class="pl-pds">"</span>one-hot<span class="pl-pds">"</span></span>))

<span class="pl-k">val</span> <span class="pl-en">fe</span> <span class="pl-k">=</span> fs.extract(data)
<span class="pl-k">val</span> <span class="pl-en">names</span> <span class="pl-k">=</span> fe.featureNames
<span class="pl-k">val</span> <span class="pl-en">features</span> <span class="pl-k">=</span> fe.featureValues[<span class="pl-en">Seq</span>[<span class="pl-k">Double</span>]]</pre>
  </div> 
  <p>See <a href="https://github.com/spotify/featran/blob/master/core/src/test/scala/com/spotify/featran/examples/Example.scala" target="_blank">Example.scala</a> for more example usage. See <a href="https://github.com/spotify/featran/tree/master/core/src/main/scala/com/spotify/featran/transformers" target="_blank">transformers</a> for a complete list of available feature transformers.</p> 
  <p>Featran also supports these additional features.</p> 
  <ul> 
   <li>Extract from Scala collections, <a href="http://flink.apache.org/" target="_blank">Flink</a> <code>DataSet</code>s, <a href="https://github.com/twitter/scalding" target="_blank">Scalding</a> <code>TypedPipe</code>s, <a href="https://github.com/spotify/scio" target="_blank">Scio</a> <code>SCollection</code>s and <a href="https://spark.apache.org/" target="_blank">Spark</a> <code>RDD</code>s</li> 
   <li>Output as Scala collections, <a href="https://github.com/scalanlp/breeze" target="_blank">Breeze</a> dense and sparse vectors, <a href="https://www.tensorflow.org/" target="_blank">TensorFlow</a> Example Protobuf and <a href="http://www.numpy.org/" target="_blank">NumPy</a> <code>.npy</code> file</li> 
   <li>Import aggregation from a previous extraction for training, validation and test sets</li> 
   <li>Compose feature specifications and separate outputs</li> 
  </ul> 
  <p>See <a href="https://spotify.github.io/featran" target="_blank">ScalaDocs</a> for current API documentation.</p> 
  <h1><a id="user-content-artifacts" class="anchor" href="https://github.com/spotify/featran#artifacts" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Artifacts</h1> 
  <p>Feature includes the following artifacts:</p> 
  <ul> 
   <li><code>featran-core</code> - Core library, supports extraction from Scala collections and output as Scala collections, Breeze dense and sparse vectors.</li> 
   <li><code>featran-flink</code> - support for extraction from Flink <code>DataSet</code></li> 
   <li><code>featran-scalding</code> - support for extraction from Scalding <code>TypedPipe</code></li> 
   <li><code>featran-scio</code> - support for extraction from Scio <code>SCollection</code></li> 
   <li><code>featran-spark</code> - support for extraction from Spark <code>RDD</code></li> 
   <li><code>featran-tensorflow</code> - suppoprt for output as TensorFlow Example Protobuf</li> 
   <li><code>featran-numpy</code> - support for output as NumPy <code>.npy</code> file</li> 
  </ul> 
  <h1><a id="user-content-license" class="anchor" href="https://github.com/spotify/featran#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h1> 
  <p>Copyright 2016-2017 Spotify AB.</p> 
  <p>Licensed under the Apache License, Version 2.0: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
 </article>
</div>