<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-sttp" class="anchor" href="https://github.com/softwaremill/sttp#sttp" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sttp</h1> 
  <p><a href="https://gitter.im/softwaremill/sttp?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/softwaremill/sttp" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/softwaremill/sttp" target="_blank"><img src="https://camo.githubusercontent.com/9cec0f6f9de8f3ee98f5b48e8514642b06e8a6bd/68747470733a2f2f7472617669732d63692e6f72672f736f6674776172656d696c6c2f737474702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/softwaremill/sttp.svg?branch=master" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.sttp/core_2.12" target="_blank"><img src="https://camo.githubusercontent.com/0113c9d8a540c45ce25d45ea1a66e708b8a01b28/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e736f6674776172656d696c6c2e737474702f636f72655f322e31322f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.sttp/core_2.12/badge.svg" style="max-width:100%;"></a> <a href="https://app.updateimpact.com/latest/634276070333485056/sttp" target="_blank"><img src="https://camo.githubusercontent.com/3e7f7aa35a70fe13c48024f011baf16ae538c049/68747470733a2f2f6170702e757064617465696d706163742e636f6d2f62616467652f3633343237363037303333333438353035362f737474702e7376673f636f6e6669673d636f6d70696c65" alt="Dependencies" data-canonical-src="https://app.updateimpact.com/badge/634276070333485056/sttp.svg?config=compile" style="max-width:100%;"></a></p> 
  <p>The HTTP client for Scala that you always wanted!</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">sort</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> <span class="pl-c1">None</span>
<span class="pl-k">val</span> <span class="pl-en">query</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http language:scala<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> the `query` parameter is automatically url-encoded</span>
<span class="pl-c"><span class="pl-c">//</span> `sort` is removed, as the value is not defined</span>
<span class="pl-k">val</span> <span class="pl-en">request</span> <span class="pl-k">=</span> sttp.get(uri<span class="pl-s"><span class="pl-pds">"</span>https://api.github.com/search/repositories?q=$query&amp;sort=$sort<span class="pl-pds">"</span></span>)
  
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">backend</span> <span class="pl-k">=</span> <span class="pl-en">HttpURLConnectionBackend</span>()
<span class="pl-k">val</span> <span class="pl-en">response</span> <span class="pl-k">=</span> request.send()

<span class="pl-c"><span class="pl-c">//</span> response.header(...): Option[String]</span>
println(response.header(<span class="pl-s"><span class="pl-pds">"</span>Content-Length<span class="pl-pds">"</span></span>)) 

<span class="pl-c"><span class="pl-c">//</span> response.unsafeBody: by default read into a String </span>
println(response.unsafeBody)                     </pre>
  </div> 
  <h2><a id="user-content-goals-of-the-project" class="anchor" href="https://github.com/softwaremill/sttp#goals-of-the-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Goals of the project</h2> 
  <ul> 
   <li>provide a simple, discoverable, no-surprises, reasonably type-safe API for making HTTP requests and reading responses</li> 
   <li>separate definition of a request from request execution</li> 
   <li>provide immutable, easily modifiable data structures for requests and responses</li> 
   <li>support multiple execution backends, both synchronous and asynchronous</li> 
   <li>provide support for backend-specific request/response streaming</li> 
   <li>minimum dependencies</li> 
  </ul> 
  <p>See also the <a href="https://softwaremill.com/introducing-sttp-the-scala-http-client" target="_blank">introduction to sttp</a> and <a href="https://softwaremill.com/sttp-streaming-uri-interpolator" target="_blank">sttp streaming &amp; URI interpolators</a> blogs.</p> 
  <h2><a id="user-content-non-goals-of-the-project" class="anchor" href="https://github.com/softwaremill/sttp#non-goals-of-the-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Non-goals of the project</h2> 
  <ul> 
   <li>implement a full HTTP client. Instead, sttp wraps existing HTTP clients, providing a consistent, programmer-friendly API. All network-related concerns such as sending the requests, connection pooling, receiving responses are delegated to the chosen backend</li> 
   <li>provide ultimate flexibility in defining the request. While it's possible to define <em>most</em> valid HTTP requests, e.g. some of the less common body chunking approaches aren't available</li> 
  </ul> 
  <h2><a id="user-content-how-is-sttp-different-from-other-libraries" class="anchor" href="https://github.com/softwaremill/sttp#how-is-sttp-different-from-other-libraries" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How is sttp different from other libraries?</h2> 
  <ul> 
   <li>immutable request builder which doesn't impose any order in which request parameters need to be specified. Such an approach allows defining partial requests with common cookies/headers/options, which can later be specialized using a specific URI and HTTP method.</li> 
   <li>support for multiple backends, both synchronous and asynchronous, with backend-specific streaming support</li> 
   <li>URI interpolator with context-aware escaping, optional parameters support and parameter collections</li> 
  </ul> 
  <h2><a id="user-content-quickstart-with-ammonite" class="anchor" href="https://github.com/softwaremill/sttp#quickstart-with-ammonite" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Quickstart with Ammonite</h2> 
  <p>If you are an <a href="http://ammonite.io" target="_blank">Ammonite</a> user, you can quickly start experimenting with sttp by copy-pasting the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">$ivy.`com.softwaremill.sttp::core:0.0.</span><span class="pl-v">14`</span>
<span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">backend</span> <span class="pl-k">=</span> <span class="pl-en">HttpURLConnectionBackend</span>()
sttp.get(uri<span class="pl-s"><span class="pl-pds">"</span>http://httpbin.org/ip<span class="pl-pds">"</span></span>).send()</pre>
  </div> 
  <h2><a id="user-content-adding-sttp-to-your-project" class="anchor" href="https://github.com/softwaremill/sttp#adding-sttp-to-your-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Adding sttp to your project</h2> 
  <p>SBT dependency:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span></pre>
  </div> 
  <p><code>sttp</code> is available for Scala 2.11 and 2.12, and requires Java 7 if using an <code>OkHttp</code> based backend, or Java 8 otherwise. The core module has no transitive dependencies.</p> 
  <p>If you'd like to use an alternate backend, <a href="https://github.com/softwaremill/sttp#supported-backends" target="_blank">see below</a> for additional instructions.</p> 
  <h2><a id="user-content-api" class="anchor" href="https://github.com/softwaremill/sttp#api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>API</h2> 
  <p>First, import:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>This brings into scope <code>sttp</code>, the starting request (it's an empty request with the <code>Accept-Encoding: gzip, defalte</code> header added). This request can be customised, each time yielding a new, immutable request description (unless a mutable body is set on the request, such as a byte array).</p> 
  <p>For example, we can set a cookie, string-body and specify that this should be a <code>POST</code> request to a given URI:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">request</span> <span class="pl-k">=</span> sttp
    .cookie(<span class="pl-s"><span class="pl-pds">"</span>login<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>me<span class="pl-pds">"</span></span>)
    .body(<span class="pl-s"><span class="pl-pds">"</span>This is a test<span class="pl-pds">"</span></span>)
    .post(uri<span class="pl-s"><span class="pl-pds">"</span>http://endpoint.com/secret<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>The request parameters (headers, cookies, body etc.) can be specified in any order. There's a lot of ways in which you can customize a request: just explore the API. And <a href="https://github.com/softwaremill/sttp#todo" target="_blank">more will be added</a>!</p> 
  <p>You can create a request description without knowing how it will be sent. But to send a request, you will need a backend. A default, synchronous backend based on Java's <code>HttpURLConnection</code> is provided out-of-the box. An implicit value of type <code>SttpBackend</code> needs to be in scope to invoke the <code>send()</code> on the request:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">backend</span> <span class="pl-k">=</span> <span class="pl-en">HttpURLConnectionBackend</span>()

<span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span> <span class="pl-en">Response</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> request.send()</pre>
  </div> 
  <p>By default the response body is read into a utf-8 string. How the response body is handled is also part of the request description. The body can be ignore (<code>.response(ignore)</code>), read into a sequence of parameters (<code>.response(asParams)</code>), mapped (<code>.mapResponse</code>) and more; some backends also support request &amp; response streaming.</p> 
  <p>The default backend doesn't wrap the response into any container, but other asynchronous backends might do so. The type parameter in the <code>Response[_]</code> type specifies the type of the body.</p> 
  <h2><a id="user-content-uri-interpolator" class="anchor" href="https://github.com/softwaremill/sttp#uri-interpolator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>URI interpolator</h2> 
  <p>Using the URI interpolator it's possible to conveniently create <code>Uri</code> instances, which can then be used to specify request endpoints, for example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">user</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Mary Smith<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">filter</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>programming languages<span class="pl-pds">"</span></span>

<span class="pl-k">val</span> <span class="pl-en">endpoint</span><span class="pl-k">:</span> <span class="pl-en">Uri</span> <span class="pl-k">=</span> uri<span class="pl-s"><span class="pl-pds">"</span>http://example.com/$user/skills?filter=$filter<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Any values embedded in the URI will be URL-encoded, taking into account the context (e.g., the whitespace in <code>user</code> will be %-encoded as <code>%20D</code>, while the whitespace in <code>filter</code> will be query-encoded as <code>+</code>).</p> 
  <p>The possibilities of the interpolator don't end here. Other supported features:</p> 
  <ul> 
   <li>parameters can have optional values: if the value of a parameter is <code>None</code>, it will be removed</li> 
   <li>maps, sequences of tuples and sequences of values can be embedded in the query part. They will be expanded into query parameters. Maps and sequences of tuples can also contain optional values, for which mappings will be removed if <code>None</code>.</li> 
   <li>optional values in the host part will be expanded to a subdomain if <code>Some</code>, removed if <code>None</code></li> 
   <li>sequences in the host part will be expanded to a subdomain sequence</li> 
   <li>if a string containing the protocol is embedded <em>as the very beginning</em>, it will not be escaped, allowing to embed entire addresses as prefixes, e.g.: <code>uri"$endpoint/login"</code>, where <code>val endpoint = "http://example.com/api"</code>.</li> 
  </ul> 
  <p>A fully-featured example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">val</span> <span class="pl-en">secure</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>
<span class="pl-k">val</span> <span class="pl-en">scheme</span> <span class="pl-k">=</span> <span class="pl-k">if</span> (secure) <span class="pl-s"><span class="pl-pds">"</span>https<span class="pl-pds">"</span></span> <span class="pl-k">else</span> <span class="pl-s"><span class="pl-pds">"</span>http<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">subdomains</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>sub1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sub2<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">vx</span> <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>y z<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">params</span> <span class="pl-k">=</span> <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>)
<span class="pl-k">val</span> <span class="pl-en">jumpTo</span> <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>section2<span class="pl-pds">"</span></span>)
uri<span class="pl-s"><span class="pl-pds">"</span>$scheme://$subdomains.example.com?x=$vx&amp;$params#$jumpTo<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> generates:</span>
<span class="pl-c"><span class="pl-c">//</span> https://sub1.sub2.example.com?x=y+z&amp;a=1&amp;b=2#section2</span></pre>
  </div> 
  <h2><a id="user-content-starting--cleaning-up" class="anchor" href="https://github.com/softwaremill/sttp#starting--cleaning-up" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Starting &amp; cleaning up</h2> 
  <p>In case of most backends, you should only instantiate a backend once per application, as a backend typically allocates resources such as thread or connection pools.</p> 
  <p>When ending the application, make sure to call <code>backend.close()</code>, which will free up resources used by the backend (if any). The close process might be asynchronous, that is it can complete after the <code>close()</code> method returns.</p> 
  <p>Note that only resources allocated by the backends are freed. For example, if you use the <code>AkkaHttpBackend()</code> the <code>close()</code> method will terminate the underlying actor system. However, if you have provided an existing actor system upon backend creation (<code>AkkaHttpBackend.usingActorSystem</code>), the <code>close()</code> method will be a no-op.</p> 
  <h2><a id="user-content-supported-backends" class="anchor" href="https://github.com/softwaremill/sttp#supported-backends" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported backends</h2> 
  <h3><a id="user-content-summary" class="anchor" href="https://github.com/softwaremill/sttp#summary" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Summary</h3> 
  <table> 
   <thead> 
    <tr> 
     <th>Class</th> 
     <th>Result wrapper</th> 
     <th>Supported stream type</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><code>HttpURLConnectionBackend</code></td> 
     <td>None (<code>Id</code>)</td> 
     <td>-</td> 
    </tr> 
    <tr> 
     <td><code>AkkaHttpBackend</code></td> 
     <td><code>scala.concurrent.Future</code></td> 
     <td><code>akka.stream.scaladsl.Source[ByteString, Any]</code></td> 
    </tr> 
    <tr> 
     <td><code>AsyncHttpClientFutureBackend</code></td> 
     <td><code>scala.concurrent.Future</code></td> 
     <td>-</td> 
    </tr> 
    <tr> 
     <td><code>AsyncHttpClientScalazBackend</code></td> 
     <td><code>scalaz.concurrent.Task</code></td> 
     <td>-</td> 
    </tr> 
    <tr> 
     <td><code>AsyncHttpClientMonixBackend</code></td> 
     <td><code>monix.eval.Task</code></td> 
     <td><code>monix.reactive.Observable[ByteBuffer]</code></td> 
    </tr> 
    <tr> 
     <td><code>AsyncHttpClientCatsBackend</code></td> 
     <td><code>F[_]: cats.effect.Async</code></td> 
     <td>-</td> 
    </tr> 
    <tr> 
     <td><code>AsyncHttpClientFs2Backend</code></td> 
     <td><code>F[_]: cats.effect.Async</code></td> 
     <td><code>fs2.Stream[F, ByteBuffer]</code></td> 
    </tr> 
    <tr> 
     <td><code>OkHttpSyncBackend</code></td> 
     <td>None (<code>Id</code>)</td> 
     <td>-</td> 
    </tr> 
    <tr> 
     <td><code>OkHttpFutureBackend</code></td> 
     <td><code>scala.concurrent.Future</code></td> 
     <td>-</td> 
    </tr> 
    <tr> 
     <td><code>OkHttpMonixBackend</code></td> 
     <td><code>monix.eval.Task</code></td> 
     <td><code>monix.reactive.Observable[ByteBuffer]</code></td> 
    </tr>
   </tbody>
  </table> 
  <h3><a id="user-content-httpurlconnectionbackend" class="anchor" href="https://github.com/softwaremill/sttp#httpurlconnectionbackend" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>HttpURLConnectionBackend</code></h3> 
  <p>The default <strong>synchronous</strong> backend. Sending a request returns a response wrapped in the identity type constructor, which is equivalent to no wrapper at all.</p> 
  <p>To use, add an implicit value:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">HttpURLConnectionBackend</span>()</pre>
  </div> 
  <h3><a id="user-content-akkahttpbackend" class="anchor" href="https://github.com/softwaremill/sttp#akkahttpbackend" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>AkkaHttpBackend</code></h3> 
  <p>To use, add the following dependency to your project:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>akka-http-backend<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>This backend depends on <a href="http://doc.akka.io/docs/akka-http/current/scala/http/" target="_blank">akka-http</a>. A fully <strong>asynchronous</strong> backend. Sending a request returns a response wrapped in a <code>Future</code>.</p> 
  <p>Next you'll need to add an implicit value:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AkkaHttpBackend</span>()

<span class="pl-c"><span class="pl-c">//</span> or, if you'd like to use an existing actor system:</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AkkaHttpBackend</span>.usingActorSystem(actorSystem)</pre>
  </div> 
  <p>This backend supports sending and receiving <a href="http://doc.akka.io/docs/akka/current/scala/stream/index.html" target="_blank">akka-streams</a> streams of type <code>akka.stream.scaladsl.Source[ByteString, Any]</code>.</p> 
  <p>To set the request body as a stream:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.akkahttp.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">akka.stream.scaladsl.</span><span class="pl-v">Source</span>
<span class="pl-k">import</span> <span class="pl-v">akka.util.</span><span class="pl-v">ByteString</span>

<span class="pl-k">val</span> <span class="pl-en">source</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-en">Any</span>] <span class="pl-k">=</span>   ...

sttp
  .streamBody(source)
  .post(uri<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>To receive the response body as a stream:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.akkahttp.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">akka.stream.scaladsl.</span><span class="pl-v">Source</span>
<span class="pl-k">import</span> <span class="pl-v">akka.util.</span><span class="pl-v">ByteString</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AkkaHttpBackend</span>()

<span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Response</span>[<span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-en">Any</span>]]] <span class="pl-k">=</span> 
  sttp
    .post(uri<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)
    .response(asStream[<span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-en">Any</span>]])
    .send()</pre>
  </div> 
  <h3><a id="user-content-asynchttpclientbackend" class="anchor" href="https://github.com/softwaremill/sttp#asynchttpclientbackend" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>AsyncHttpClientBackend</code></h3> 
  <p>To use, add the following dependency to your project:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>async-http-client-backend-future<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span>
<span class="pl-c"><span class="pl-c">//</span> or</span>
<span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>async-http-client-backend-scalaz<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span>
<span class="pl-c"><span class="pl-c">//</span> or</span>
<span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>async-http-client-backend-monix<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span>
<span class="pl-c"><span class="pl-c">//</span> or</span>
<span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>async-http-client-backend-cats<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>This backend depends on <a href="https://github.com/AsyncHttpClient/async-http-client" target="_blank">async-http-client</a>. A fully <strong>asynchronous</strong> backend, which uses <a href="http://netty.io" target="_blank">Netty</a> behind the scenes.</p> 
  <p>The responses are wrapped depending on the dependency chosen in either a:</p> 
  <ul> 
   <li>standard Scala <code>Future</code></li> 
   <li><a href="https://github.com/scalaz/scalaz" target="_blank">Scalaz</a> <code>Task</code>. There's a transitive dependency on <code>scalaz-concurrent</code>.</li> 
   <li><a href="https://monix.io" target="_blank">Monix</a> <code>Task</code>. There's a transitive dependency on <code>monix-eval</code>.</li> 
   <li>Any type implementing the <a href="https://github.com/typelevel/cats-effect" target="_blank">Cats Effect</a> <code>Async</code> typeclass, such as <code>cats.effect.IO</code>. There's a transitive dependency on <code>cats-effect</code>.</li> 
  </ul> 
  <p>Next you'll need to add an implicit value:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientFutureBackend</span>()

<span class="pl-c"><span class="pl-c">//</span> or, if you're using the scalaz version:</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientScalazBackend</span>()

<span class="pl-c"><span class="pl-c">//</span> or, if you're using the monix version:</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientMonixBackend</span>()

<span class="pl-c"><span class="pl-c">//</span> or, if you're using the cats effect version:</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientCatsBackend</span>[cats.effect.<span class="pl-en">IO</span>]()

<span class="pl-c"><span class="pl-c">//</span> or, if you'd like to use custom configuration:</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientFutureBackend</span>.usingConfig(asyncHttpClientConfig)

<span class="pl-c"><span class="pl-c">//</span> or, if you'd like to instantiate the AsyncHttpClient yourself:</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientFutureBackend</span>.usingClient(asyncHttpClient)</pre>
  </div> 
  <h4><a id="user-content-streaming-using-monix" class="anchor" href="https://github.com/softwaremill/sttp#streaming-using-monix" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Streaming using Monix</h4> 
  <p>The Monix backend supports streaming (as both Monix and Async Http Client support reactive streams <code>Publisher</code>s out of the box). The type of supported streams in this case is <code>Observable[ByteBuffer]</code>. That is, you can set such an observable as a request body:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">java.nio.</span><span class="pl-v">ByteBuffer</span>
<span class="pl-k">import</span> <span class="pl-v">monix.reactive.</span><span class="pl-v">Observable</span>

<span class="pl-k">val</span> <span class="pl-en">obs</span><span class="pl-k">:</span> <span class="pl-en">Observable</span>[<span class="pl-en">ByteBuffer</span>] <span class="pl-k">=</span>  ...

sttp
  .streamBody(obs)
  .post(uri<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>And receive responses as an observable stream:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.asynchttpclient.monix.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">java.nio.</span><span class="pl-v">ByteBuffer</span>
<span class="pl-k">import</span> <span class="pl-v">monix.eval.</span><span class="pl-v">Task</span>
<span class="pl-k">import</span> <span class="pl-v">monix.reactive.</span><span class="pl-v">Observable</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sttpBackend</span> <span class="pl-k">=</span> <span class="pl-en">AsyncHttpClientMonixBackend</span>()

<span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span> <span class="pl-en">Task</span>[<span class="pl-en">Response</span>[<span class="pl-en">Observable</span>[<span class="pl-en">ByteBuffer</span>]]] <span class="pl-k">=</span> 
  sttp
    .post(uri<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)
    .response(asStream[<span class="pl-en">Observable</span>[<span class="pl-en">ByteBuffer</span>]])
    .send()</pre>
  </div> 
  <p>It's also possible to use <a href="https://github.com/functional-streams-for-scala/fs2" target="_blank">fs2</a>s streams for sending request &amp; receiving responses.</p> 
  <h3><a id="user-content-okhttpclientbackend" class="anchor" href="https://github.com/softwaremill/sttp#okhttpclientbackend" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>OkHttpClientBackend</code></h3> 
  <p>To use, add the following dependency to your project:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>okhttp-backend<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span>
<span class="pl-c"><span class="pl-c">//</span> or, for the monix version:</span>
<span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>okhttp-backend-monix<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>This backend depends on <a href="http://square.github.io/okhttp/" target="_blank">OkHttp</a>, and offers:</p> 
  <ul> 
   <li>a <strong>synchronous</strong> backend: <code>OkHttpSyncBackend</code></li> 
   <li>an <strong>asynchronous</strong>, <code>Future</code>-based backend: <code>OkHttpFutureBackend</code></li> 
   <li>an <strong>asynchronous</strong>, Monix-<code>Task</code>-based backend: <code>OkHttpMonixBackend</code></li> 
  </ul> 
  <p>OkHttp fully supports HTTP/2.</p> 
  <h3><a id="user-content-custom-backends-logging-metrics" class="anchor" href="https://github.com/softwaremill/sttp#custom-backends-logging-metrics" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom backends, logging, metrics</h3> 
  <p>It is also entirely possible to write your own backend (if so, please consider contributing!) or wrapping an existing one. You can even write completely generic wrappers for any delegate backend, as each backend comes equipped with a monad for the response type. This brings the possibility to <code>map</code> and <code>flatMap</code> over responses.</p> 
  <p>Possible use-cases for wrapper-backend include:</p> 
  <ul> 
   <li>logging</li> 
   <li>capturing metrics</li> 
   <li>request signing (transforming the request before sending it to the delegate)</li> 
  </ul> 
  <p>To pass some context to wrapper-backends, requests can be <em>tagged</em>. Each <code>RequestT</code> instance contains a <code>tags: Map[String, Any]</code> field. This is unused by http, but can be used e.g. to pass a metric name or logging context.</p> 
  <h2><a id="user-content-json" class="anchor" href="https://github.com/softwaremill/sttp#json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JSON</h2> 
  <p>JSON encoding of bodies and decoding of responses can be handled using <a href="https://circe.github.io/circe/" target="_blank">Circe</a> by the <code>circe</code> module. To use add the following dependency to your project:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.sttp<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>circe<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.14<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>This module adds a method to the request and a function that can be given to a request to decode the response to a specific object.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.circe.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">backend</span> <span class="pl-k">=</span> <span class="pl-en">HttpURLConnectionBackend</span>()

<span class="pl-c"><span class="pl-c">//</span> Assume that there is an implicit circe encoder in scope</span>
<span class="pl-c"><span class="pl-c">//</span> for the request Payload, and a decoder for the Response</span>
<span class="pl-k">val</span> <span class="pl-en">requestPayload</span><span class="pl-k">:</span> <span class="pl-en">Payload</span> <span class="pl-k">=</span> <span class="pl-k">???</span>

<span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span> <span class="pl-en">Either</span>[io.circe.<span class="pl-en">Error</span>, <span class="pl-en">Response</span>] <span class="pl-k">=</span> 
  sttp
    .post(uri<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)
    .body(requestPayload)
    .response(asJson[<span class="pl-en">Response</span>])
    .send()</pre>
  </div> 
  <h2><a id="user-content-request-type" class="anchor" href="https://github.com/softwaremill/sttp#request-type" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Request type</h2> 
  <p>All request descriptions have type <code>RequestT[U, T, S]</code> (T as in Template). If this looks a bit complex, don't worry, what the three type parameters stand for is the only thing you'll hopefully have to remember when using the API!</p> 
  <p>Going one-by-one:</p> 
  <ul> 
   <li><code>U[_]</code> specifies if the request method and URL are specified. Using the API, this can be either <code>type Empty[X] = None</code>, meaning that the request has neither a method nor an URI. Or, it can be <code>type Id[X] = X</code> (type-level identity), meaning that the request has both a method and an URI specified. Only requests with a specified URI &amp; method can be sent.</li> 
   <li><code>T</code> specifies the type to which the response will be read. By default, this is <code>String</code>. But it can also be e.g. <code>Array[Byte]</code> or <code>Unit</code>, if the response should be ignored. Response body handling can be changed by calling the <code>.response</code> method. With backends which support streaming, this can also be a supported stream type.</li> 
   <li><code>S</code> specifies the stream type that this request uses. Most of the time this will be <code>Nothing</code>, meaning that this request does not send a streaming body or receive a streaming response. So most of the times you can just ignore that parameter. But, if you are using a streaming backend and want to send/receive a stream, the <code>.streamBody</code> or <code>response(asStream[S])</code> will change the type parameter.</li> 
  </ul> 
  <p>There are two type aliases for the request template that are used:</p> 
  <ul> 
   <li><code>type Request[T, S] = RequestT[Id, T, S]</code>. A sendable request.</li> 
   <li><code>type PartialRequest[T, S] = RequestT[Empty, T, S]</code></li> 
  </ul> 
  <h2><a id="user-content-timeouts" class="anchor" href="https://github.com/softwaremill/sttp#timeouts" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Timeouts</h2> 
  <p>Sttp supports read and connection timeouts:</p> 
  <ul> 
   <li>Connection timeout - can be set globally (30 seconds by default)</li> 
   <li>Read timeout - can be set per request (1 minute by default)</li> 
  </ul> 
  <p>How to use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.sttp.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> all backends provide a constructor that allows users to specify connection timeout</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">backend</span> <span class="pl-k">=</span> <span class="pl-en">HttpURLConnectionBackend</span>(connectionTimeout <span class="pl-k">=</span> <span class="pl-c1">1.</span>minute)

sttp
  .get(uri<span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)
  .readTimeout(<span class="pl-c1">5.</span>minutes) <span class="pl-c"><span class="pl-c">//</span> or Duration.Inf to turn read timeout off</span>
  .send()</pre>
  </div> 
  <h2><a id="user-content-notes" class="anchor" href="https://github.com/softwaremill/sttp#notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Notes</h2> 
  <ul> 
   <li>the encoding for <code>String</code>s defaults to <code>utf-8</code>.</li> 
   <li>unless explicitly specified, the <code>Content-Type</code> defaults to: 
    <ul> 
     <li><code>text/plain</code> for text</li> 
     <li><code>application/x-www-form-urlencoded</code> for form data</li> 
     <li><code>multipart/form-data</code> for multipart form data</li> 
     <li><code>application/octet-stream</code> for everything else (binary)</li> 
    </ul> </li> 
  </ul> 
  <h2><a id="user-content-other-scala-http-clients" class="anchor" href="https://github.com/softwaremill/sttp#other-scala-http-clients" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Other Scala HTTP clients</h2> 
  <ul> 
   <li><a href="https://github.com/scalaj/scalaj-http" target="_blank">scalaj</a></li> 
   <li><a href="http://doc.akka.io/docs/akka-http/current/scala/http/client-side/index.html" target="_blank">akka-http client</a></li> 
   <li><a href="http://dispatch.databinder.net/Dispatch.html" target="_blank">dispatch</a></li> 
   <li><a href="https://github.com/playframework/play-ws" target="_blank">play ws</a></li> 
   <li><a href="https://github.com/Spinoco/fs2-http" target="_blank">fs2-http</a></li> 
   <li><a href="http://http4s.org/v0.17/client/" target="_blank">http4s</a></li> 
   <li><a href="http://eed3si9n.com/gigahorse/" target="_blank">Gigahorse</a></li> 
   <li><a href="https://github.com/hmil/RosHTTP" target="_blank">RösHTTP</a></li> 
  </ul> 
  <h2><a id="user-content-contributing" class="anchor" href="https://github.com/softwaremill/sttp#contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributing</h2> 
  <p>Take a look at the <a href="https://github.com/softwaremill/sttp/issues" target="_blank">open issues</a> and pick a task you'd like to work on!</p> 
  <h2><a id="user-content-credits" class="anchor" href="https://github.com/softwaremill/sttp#credits" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Credits</h2> 
  <ul> 
   <li><a href="https://github.com/szimano" target="_blank">Tomasz Szymański</a></li> 
   <li><a href="https://github.com/adamw" target="_blank">Adam Warski</a></li> 
   <li><a href="https://github.com/omainegra" target="_blank">Omar Alejandro Mainegra Sarduy</a></li> 
   <li><a href="https://github.com/aeons" target="_blank">Bjørn Madsen</a></li> 
   <li><a href="https://github.com/pbuda" target="_blank">Piotr Buda</a></li> 
   <li><a href="https://github.com/bhop" target="_blank">Piotr Gabara</a></li> 
  </ul> 
 </article>
</div>