<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-elastic4s---elasticsearch-http-and-tcp-scala-client" class="anchor" href="https://github.com/sksamuel/elastic4s#elastic4s---elasticsearch-http-and-tcp-scala-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>elastic4s - Elasticsearch HTTP and TCP Scala Client</h1> 
  <p><a href="https://gitter.im/sksamuel/elastic4s?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/sksamuel/elastic4s" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/sksamuel/elastic4s" target="_blank"><img src="https://camo.githubusercontent.com/c6cb7992dd9102d039373277b66f27c1b987713d/68747470733a2f2f7472617669732d63692e6f72672f736b73616d75656c2f656c617374696334732e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/sksamuel/elastic4s.png?branch=master" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22elastic4s-core_2.10%22" target="_blank"><img src="https://camo.githubusercontent.com/2251001a6576e8180f74afc1d7bef30281051b63/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e736b73616d75656c2e656c617374696334732f656c617374696334732d636f72655f322e31302e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3130" data-canonical-src="https://img.shields.io/maven-central/v/com.sksamuel.elastic4s/elastic4s-core_2.10.svg?label=latest%20release%20for%202.10" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22elastic4s-core_2.11%22" target="_blank"><img src="https://camo.githubusercontent.com/63102a0a7d6aadf0b7e636a7366ec0439dee3e1f/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e736b73616d75656c2e656c617374696334732f656c617374696334732d636f72655f322e31312e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3131" data-canonical-src="https://img.shields.io/maven-central/v/com.sksamuel.elastic4s/elastic4s-core_2.11.svg?label=latest%20release%20for%202.11" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22elastic4s-core_2.12%22" target="_blank"><img src="https://camo.githubusercontent.com/385ff39c18864630454a5d6c3e6b9e6c179fa45a/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e736b73616d75656c2e656c617374696334732f656c617374696334732d636f72655f322e31322e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3132" data-canonical-src="https://img.shields.io/maven-central/v/com.sksamuel.elastic4s/elastic4s-core_2.12.svg?label=latest%20release%20for%202.12" style="max-width:100%;"></a></p> 
  <p>Elastic4s is a concise, idiomatic, reactive, type safe Scala client for Elasticsearch. The client can be used over both HTTP and TCP by choosing either of the <code>elastic4s-http</code> or <code>elastic4s-tcp</code> submodules. The official Elasticsearch Java client can of course be used in Scala, but due to Java's syntax it is more verbose and it naturally doesn't support classes in the core Scala core library nor Scala idioms.</p> 
  <p>Elastic4s's DSL allows you to construct your requests programatically, with syntactic and semantic errors manifested at compile time, and uses standard Scala futures to enable you to easily integrate into an asynchronous workflow. The aim of the DSL is that requests are written in a builder-like way, while staying broadly similar to the Java API or Rest API. Each request is an immutable object, so you can create requests and safely reuse them, or further copy them for derived requests. Because each request is strongly typed your IDE or editor can use the type information to show you what operations are available for any request type.</p> 
  <p>Elastic4s supports Scala collections so you don't have to do tedious conversions from your Scala domain classes into Java collections. It also allows you to index and read classes directly using typeclasses so you don't have to set fields or json documents manually. These typeclasses are generated using your favourite json library - modules exist for Jackson, Circe, Json4s, PlayJson and Spray Json. The client also uses standard Scala durations to avoid the use of strings or primitives for duration lengths.</p> 
  <p>Read <a href="https://sksamuel.github.io/elastic4s/docs/" target="_blank">the full documentation</a> to learn more about elastic4s.</p> 
  <h4><a id="user-content-key-points" class="anchor" href="https://github.com/sksamuel/elastic4s#key-points" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Key points</h4> 
  <ul> 
   <li>Type safe concise DSL</li> 
   <li>Integrates with standard Scala futures</li> 
   <li>Uses Scala collections library over Java collections</li> 
   <li>Returns <code>Option</code> where the java methods would return null</li> 
   <li>Uses Scala <code>Duration</code>s instead of strings/longs for time values</li> 
   <li>Supports typeclasses for indexing, updating, and search backed by Jackson, Circe, Json4s and PlayJson implementations</li> 
   <li>Leverages the built-in Java client</li> 
   <li>Provides <a href="https://github.com/sksamuel/elastic4s#elastic-reactive-streams" target="_blank">reactive-streams</a> implementation</li> 
   <li>Provides embedded node and testkit subprojects, ideal for your tests</li> 
  </ul> 
  <h2><a id="user-content-introduction" class="anchor" href="https://github.com/sksamuel/elastic4s#introduction" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Introduction</h2> 
  <p>Elasticsearch (on the JVM) has two interfaces. One is the regular HTTP interface available on port 9200 (by default) and the other is a TCP interface on port 9300 (by default). Historically the Java API provided by Elasticsearch has always been TCP based with the rationale that it saves marshalling requests into JSON and is cluster aware and so can route requests to the correct node. Therefore elastic4s was also TCP based since it delegates requests to the underlying Java client.</p> 
  <p>Starting with elastic4s 5.2.x a new <a href="https://github.com/sksamuel/elastic4s/tree/master/elastic4s-http" target="_blank">HTTP client</a> has been added which relies on the Java REST client for connection management, but still uses the familiar elastic4s DSL to build the queries so you don't have to. As of version 5.4.x the HTTP client is now considered production ready after extensive testing on the 5.2 and 5.3 release chains.</p> 
  <p>Depending on which client you use, you will need to add either <code>elastic-http</code> or <code>elastic-tcp</code> dependencies to your build.</p> 
  <h4><a id="user-content-release" class="anchor" href="https://github.com/sksamuel/elastic4s#release" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Release</h4> 
  <p>Elastic4s is released for both Scala 2.11 and Scala 2.12. Scala 2.10 support has been dropped starting with the 5.0.x release train. For releases that are compatible with earlier versions of Elasticsearch, <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.sksamuel.elastic4s%22" target="_blank">search maven central</a>. For more information read <a href="https://github.com/sksamuel/elastic4s#using-elastic4s-in-your-project" target="_blank">Using Elastic4s in your project</a>.</p> 
  <p>Starting from version 5.0.0, the underlying Elasticsearch TCP Java client has dependencies on Netty, Lucene and others that it does not bring in transitively. The elastic4s tcp client brings in the dependencies for you, but in case anything is missed, you would need to add it to your build yourself.</p> 
  <p>The second issue is that it uses Netty 4.1. However some popular projects such as Spark and Play currently use 4.0 and there is a breaking change between the two versions. Therefore if you bring in elastic4s tcp (or even just the elasticsearch Java TCP client) you will get <code>NoSuchMethodException</code>s if you try to use it with Play or Spark. I am unaware of a workaround at present, until Spark and Play update to the latest version, other than switching to the HTTP client.</p> 
  <table> 
   <thead> 
    <tr> 
     <th>Elasticsearch Version</th> 
     <th>Http Client Version</th> 
     <th>Tcp Client Version</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td>5.4.x</td> 
     <td>5.4.x</td> 
     <td>5.4.0</td> 
    </tr> 
    <tr> 
     <td>5.3.x</td> 
     <td>5.4.x</td> 
     <td>5.3.2</td> 
    </tr> 
    <tr> 
     <td>5.2.x</td> 
     <td>5.4.x</td> 
     <td>5.2.11</td> 
    </tr> 
    <tr> 
     <td>5.1.x</td> 
     <td>5.4.x</td> 
     <td>5.1.5</td> 
    </tr> 
    <tr> 
     <td>5.0.x</td> 
     <td>5.4.x</td> 
     <td>5.0.4</td> 
    </tr> 
    <tr> 
     <td>2.4.x</td> 
     <td>no support</td> 
     <td>2.4.X</td> 
    </tr> 
    <tr> 
     <td>2.3.x</td> 
     <td>no support</td> 
     <td>2.3.X</td> 
    </tr> 
    <tr> 
     <td>2.2.x</td> 
     <td>no support</td> 
     <td>2.2.X</td> 
    </tr> 
    <tr> 
     <td>2.1.x</td> 
     <td>no support</td> 
     <td>2.1.X</td> 
    </tr> 
    <tr> 
     <td>2.0.x</td> 
     <td>no support</td> 
     <td>2.0.X</td> 
    </tr> 
    <tr> 
     <td>1.7.x</td> 
     <td>no support</td> 
     <td>1.7.5</td> 
    </tr> 
    <tr> 
     <td>1.6.x</td> 
     <td>no support</td> 
     <td>1.6.6</td> 
    </tr> 
    <tr> 
     <td>1.5.x</td> 
     <td>no support</td> 
     <td>1.5.17</td> 
    </tr> 
    <tr> 
     <td>1.4.x</td> 
     <td>no support</td> 
     <td>1.4.14</td> 
    </tr> 
    <tr> 
     <td>1.3.x</td> 
     <td>no support</td> 
     <td>1.3.3</td> 
    </tr> 
    <tr> 
     <td>1.2.x</td> 
     <td>no support</td> 
     <td>1.2.3.0</td> 
    </tr> 
    <tr> 
     <td>1.1.x</td> 
     <td>no support</td> 
     <td>1.1.2.0</td> 
    </tr> 
    <tr> 
     <td>1.0.x</td> 
     <td>no support</td> 
     <td>1.0.3.0</td> 
    </tr> 
    <tr> 
     <td>0.90.x</td> 
     <td>no support</td> 
     <td>0.90.13.2</td> 
    </tr>
   </tbody>
  </table> 
  <p>See full <a href="https://github.com/sksamuel/elastic4s#changelog" target="_blank">changelog</a>.</p> 
  <h2><a id="user-content-quick-start" class="anchor" href="https://github.com/sksamuel/elastic4s#quick-start" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Quick Start</h2> 
  <p>We have created sample projects for http, tcp in both sbt, maven and gradle. Check them out here: <a href="https://github.com/sksamuel/elastic4s/tree/master/samples" target="_blank">https://github.com/sksamuel/elastic4s/tree/master/samples</a></p> 
  <p>To get started you will need to add a dependency to either</p> 
  <ul> 
   <li><a href="http://search.maven.org/#search%7Cga%7C1%7Celastic4s-http" target="_blank">elastic4s-http</a></li> 
   <li><a href="http://search.maven.org/#search%7Cga%7C1%7Celastic4s-tcp" target="_blank">elastic4s-tcp</a></li> 
  </ul> 
  <p>depending on which client you intend you use (or both).</p> 
  <p>The basic usage is that you create an instance of a client and then invoke the <code>execute</code> method with the requests you want to perform. The execute method is asynchronous and will return a standard Scala <code>Future[T]</code> where T is the response type appropriate for your request type. For example a <em>search</em> request will return a response of type <code>SearchResponse</code> which contains the results of the search.</p> 
  <p>To create an instance of the HTTP client, use the <code>HttpClient</code> companion object methods. To create an instance of the TCP client, use the <code>TcpClient</code> companion object methods. Requests are the same for either client, but response classes may vary slightly as the HTTP response classes model the returned JSON whereas the TCP response classes wrap the Java client classes.</p> 
  <p>Requests are created using the elastic4s DSL. For example to create a search request, you would do:</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>index<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>).query(<span class="pl-s"><span class="pl-pds">"</span>findthistext<span class="pl-pds">"</span></span>)`</pre>
  </div> 
  <p>The DSL methods are located in the <code>ElasticDsl</code> trait which needs to be imported or extended. Although the syntax is identical whether you use the HTTP or TCP client, you must import the appropriate trait (<code>com.sksamuel.elastic4s.ElasticDSL</code> for TCP or <code>com.sksamuel.elastic4s.http.ElasticDSL</code> for HTTP) depending on which client you are using.</p> 
  <h3><a id="user-content-example-sbt-setup" class="anchor" href="https://github.com/sksamuel/elastic4s#example-sbt-setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example SBT Setup</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> major.minor are in sync with the elasticsearch releases</span>
<span class="pl-k">val</span> <span class="pl-en">elastic4sVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>x.x.x<span class="pl-pds">"</span></span>
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> elastic4sVersion,
  <span class="pl-c"><span class="pl-c">//</span> for the tcp client</span>
  <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-tcp<span class="pl-pds">"</span></span> <span class="pl-k">%</span> elastic4sVersion,
  
  <span class="pl-c"><span class="pl-c">//</span> for the http client</span>
  <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-http<span class="pl-pds">"</span></span> <span class="pl-k">%</span> elastic4sVersion,
  
  <span class="pl-c"><span class="pl-c">//</span> if you want to use reactive streams</span>
  <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-streams<span class="pl-pds">"</span></span> <span class="pl-k">%</span> elastic4sVersion,
  
  <span class="pl-c"><span class="pl-c">//</span> testing</span>
  <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-testkit<span class="pl-pds">"</span></span> <span class="pl-k">%</span> elastic4sVersion <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-embedded<span class="pl-pds">"</span></span> <span class="pl-k">%</span> elastic4sVersion <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-example-application" class="anchor" href="https://github.com/sksamuel/elastic4s#example-application" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example Application</h3> 
  <p>An example is worth 1000 characters so here is a quick example of how to connect to a node with a client, create and index and index a one field document. Then we will search for that document using a simple text query.</p> 
  <p>For this example we will use the HTTP client and the <code>elastic4s-circe</code> json serializer for converting our case classes into json requests. Circe support is optional, and you can use Jackson, or Json4s for example.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.</span>{<span class="pl-v">ElasticsearchClientUri</span>, <span class="pl-v">TcpClient</span>}
<span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.searches.</span><span class="pl-v">RichSearchResponse</span>
<span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.action.support.WriteRequest.</span><span class="pl-v">RefreshPolicy</span>
<span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.common.settings.</span><span class="pl-v">Settings</span>

<span class="pl-c"><span class="pl-c">//</span> circe</span>
<span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.circe.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">io.circe.generic.auto.</span><span class="pl-v">_ </span>

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Artist</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>)

<span class="pl-k">object</span> <span class="pl-en">ArtistIndex</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {

    <span class="pl-c"><span class="pl-c">//</span> spawn an embedded node for testing</span>
    <span class="pl-k">val</span> <span class="pl-en">localNode</span> <span class="pl-k">=</span> <span class="pl-en">LocalNode</span>(clusterName, homePath.toAbsolutePath.toString)
    
    <span class="pl-c"><span class="pl-c">//</span> in this example we connect to the local node to get a client object</span>
    <span class="pl-c"><span class="pl-c">//</span> in your real code you must create a client using HttpClient or TcpClient</span>
    <span class="pl-c"><span class="pl-c">//</span> see the section on "Connecting to a cluster"</span>
    <span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> localNode.elastic4sclient()
    
    <span class="pl-c"><span class="pl-c">//</span> we must import the dsl</span>
    <span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.ElasticDsl.</span><span class="pl-v">_</span>

  <span class="pl-c"><span class="pl-c">//</span> Next we create an index in advance ready to receive documents.</span>
  <span class="pl-c"><span class="pl-c">//</span> await is a helper method to make this operation synchronous instead of async</span>
  <span class="pl-c"><span class="pl-c">//</span> You would normally avoid doing this in a real program as it will block the calling thread</span>
  <span class="pl-c"><span class="pl-c">//</span> but is useful when testing</span>
  client.execute {
    createIndex(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span>).mappings(
       mapping(<span class="pl-s"><span class="pl-pds">"</span>artist<span class="pl-pds">"</span></span>) as(
          textField(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>)
       )
    )
  }.await

  <span class="pl-c"><span class="pl-c">//</span> next we index a single document. Notice we can pass in the case class directly</span>
  <span class="pl-c"><span class="pl-c">//</span> and elastic4s will marshall this for us using the circe marshaller we imported earlier.</span>
  <span class="pl-c"><span class="pl-c">//</span> the refresh policy means that we want this document to flush to the disk immmediately.</span>
  <span class="pl-c"><span class="pl-c">//</span> see the section on Eventual Consistency.</span>
  client.execute { 
  	indexInto(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>artists<span class="pl-pds">"</span></span>) doc <span class="pl-en">Artist</span>(<span class="pl-s"><span class="pl-pds">"</span>Coldplay<span class="pl-pds">"</span></span>) refresh(<span class="pl-en">RefreshPolicy</span>.<span class="pl-en">IMMEDIATE</span>)
  }.await

  <span class="pl-c"><span class="pl-c">//</span> now we can search for the document we just indexed</span>
  <span class="pl-k">val</span> <span class="pl-en">resp</span> <span class="pl-k">=</span> client.execute { 
    search(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>artists<span class="pl-pds">"</span></span>) query <span class="pl-s"><span class="pl-pds">"</span>coldplay<span class="pl-pds">"</span></span> 
  }.await
  
  println(<span class="pl-s"><span class="pl-pds">"</span>---- Search Hit Parsed ----<span class="pl-pds">"</span></span>)
  resp.to[<span class="pl-en">Artist</span>].foreach(println)
  
  <span class="pl-c"><span class="pl-c">//</span> pretty print the complete response</span>
  <span class="pl-k">import</span> <span class="pl-v">io.circe.</span><span class="pl-v">Json</span>
  <span class="pl-k">import</span> <span class="pl-v">io.circe.parser.</span><span class="pl-v">_</span>
  println(<span class="pl-s"><span class="pl-pds">"</span>---- Response as JSON ----<span class="pl-pds">"</span></span>)
  println(decode[<span class="pl-en">Json</span>](resp.original.toString).right.get.spaces2)
  
  client.close()
}</pre>
  </div> 
  <h2><a id="user-content-eventual-consistency" class="anchor" href="https://github.com/sksamuel/elastic4s#eventual-consistency" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Eventual Consistency</h2> 
  <p>Elasticsearch is eventually consistent. This means when you index a document it is not normally immediately available to be searched, but queued to be flushed to the indexes on disk. By default flushing occurs every second but this can be reduced (or increased) for bulk inserts. Another option, which you saw in the quick start guide, was to set the refresh policy to <code>IMMEDIATE</code> which will force a flush straight away.</p> 
  <p>For more in depth examples keep reading.</p> 
  <h2><a id="user-content-syntax" class="anchor" href="https://github.com/sksamuel/elastic4s#syntax" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Syntax</h2> 
  <p>Here is a list of the common requests and the syntax used to create them and whether they are supported by the TCP or HTTP client. If the HTTP client does not support them, you will need to fall back to the TCP, or use the Java client and build the JSON yourself. Or even better, raise a PR with the addition. For more details on each request click through to the readme page. For options that are not yet documented, refer to the Elasticsearch documentation asthe DSL closely mirrors the standard Java API / REST API.</p> 
  <table> 
   <thead> 
    <tr> 
     <th>Operation</th> 
     <th>Syntax</th> 
     <th>HTTP</th> 
     <th>TCP</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/indices/aliases.html" target="_blank">Add Alias</a></td> 
     <td><code>addAlias(&lt;alias&gt;).on(&lt;index&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/bulk.html" target="_blank">Bulk</a></td> 
     <td><code>bulk(query1, query2, query3...)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Cancel Tasks</td> 
     <td><code>cancelTasks(&lt;nodeIds&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Cat Aliases</td> 
     <td><code>catAliases()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Allocation</td> 
     <td><code>catAllocation()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Counts</td> 
     <td><code>catCount()</code> or <code>catCount(&lt;indexes&gt;</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Indices</td> 
     <td><code>catIndices()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Master</td> 
     <td><code>catMaster()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Nodes</td> 
     <td><code>catNodes()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Plugins</td> 
     <td><code>catPlugins()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Shards</td> 
     <td><code>catShards()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Cat Thread Pools</td> 
     <td><code>catThreadPool()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Clear index cache</td> 
     <td><code>clearCache(&lt;index&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Close index</td> 
     <td><code>closeIndex(&lt;name&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Cluster health</td> 
     <td><code>clusterHealth()</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Cluster stats</td> 
     <td><code>clusterStats()</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/indices/createindex.html" target="_blank">Create Index</a></td> 
     <td><code>createIndex(&lt;name&gt;).mappings( mapping(&lt;name&gt;).as( ... fields ... ) )</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/misc/snapshot.html" target="_blank">Create Repository</a></td> 
     <td><code>createRepository(&lt;repo&gt;).type(&lt;type&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/misc/snapshot.html" target="_blank">Create Snapshot</a></td> 
     <td><code>createSnapshot(&lt;name&gt;).in(&lt;repo&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Create Template</td> 
     <td><code>createTemplate(&lt;name&gt;).pattern(&lt;pattern&gt;).mappings {...}</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/delete.html" target="_blank">Delete by id</a></td> 
     <td><code>delete(&lt;id&gt;).from(&lt;index&gt; / &lt;type&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Delete by query</td> 
     <td><code>deleteIn(&lt;index&gt;).by(&lt;query&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/delete.html" target="_blank">Delete index</a></td> 
     <td><code>deleteIndex(&lt;index&gt;) [settings]</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/misc/snapshot.html" target="_blank">Delete Snapshot</a></td> 
     <td><code>deleteSnapshot(&lt;name&gt;).in(&lt;repo&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Delete Template</td> 
     <td><code>deleteTemplate(&lt;name&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/search/explain.html" target="_blank">Explain</a></td> 
     <td><code>explain(&lt;index&gt;, &lt;type&gt;, &lt;id&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Field stats</td> 
     <td><code>fieldStats(&lt;indexes&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Flush Index</td> 
     <td><code>flushIndex(&lt;index&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/indices/optimize.html" target="_blank">Force Merge</a></td> 
     <td><code>forceMerge(&lt;indexes&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/get.html" target="_blank">Get</a></td> 
     <td><code>get(&lt;id&gt;).from(&lt;index&gt; / &lt;type&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Get All Aliases</td> 
     <td><code>getAllAliases()</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Get Alias</td> 
     <td><code>getAlias(&lt;name&gt;).on(&lt;index&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Get Mapping</td> 
     <td><code>getMapping(&lt;index&gt; / &lt;type&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Get Segments</td> 
     <td><code>getSegments(&lt;indexes&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Get Snapshot</td> 
     <td><code>getSnapshot &lt;name&gt; from &lt;repo&gt;</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Get Template</td> 
     <td><code>getTemplate(&lt;name&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/index.html" target="_blank">Index</a></td> 
     <td><code>indexInto(&lt;index&gt; / &lt;type&gt;).doc(&lt;doc&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Index exists</td> 
     <td><code>indexExists(&lt;name&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Index Status</td> 
     <td><code>indexStatus(&lt;index&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>List Tasks</td> 
     <td><code>listTasks(nodeIds)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Lock Acquire</td> 
     <td><code>acquireGlobalLock()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Lock Release</td> 
     <td><code>releaseGlobalLock()</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/multiget.html" target="_blank">Multiget</a></td> 
     <td><code>multiget( get(1).from(&lt;index&gt; / &lt;type&gt;), get(2).from(&lt;index&gt; / &lt;type&gt;) )</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/search/multisearch.html" target="_blank">Multisearch</a></td> 
     <td><code>multi( search(...), search(...) )</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Node Info</td> 
     <td><code>nodeInfo(&lt;optional node list&gt;</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Node Stats</td> 
     <td><code>nodeStats(&lt;optional node list&gt;).stats(&lt;stats&gt;</code></td> 
     <td>yes</td> 
     <td></td> 
    </tr> 
    <tr> 
     <td>Open index</td> 
     <td><code>openIndex(&lt;name&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Put mapping</td> 
     <td><code>putMapping(&lt;index&gt; / &lt;type&gt;) as { mappings block }</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Recover Index</td> 
     <td><code>recoverIndex(&lt;name&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Refresh index</td> 
     <td><code>refreshIndex(&lt;name&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Register Query</td> 
     <td><code>register(&lt;query&gt;).into(&lt;index&gt; / &lt;type&gt;, &lt;field&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/indices/aliases.html" target="_blank">Remove Alias</a></td> 
     <td><code>removeAlias(&lt;alias&gt;).on(&lt;index&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/misc/snapshot.html" target="_blank">Restore Snapshot</a></td> 
     <td><code>restoreSnapshot(&lt;name&gt;).from(&lt;repo&gt;)</code></td> 
     <td></td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/search/search.html" target="_blank">Search</a></td> 
     <td><code>search(&lt;index&gt; / &lt;type&gt;).query(&lt;query&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Search scroll</td> 
     <td><code>searchScroll(&lt;scrollId&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Term Vectors</td> 
     <td><code>termVectors(&lt;index&gt;, &lt;type&gt;, &lt;id&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td>Type Exists</td> 
     <td><code>typesExists(&lt;types&gt;) in &lt;index&gt;</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/document/update.html" target="_blank">Update</a></td> 
     <td><code>update(&lt;id&gt;).in(&lt;index&gt; / &lt;type&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr> 
    <tr> 
     <td><a href="https://sksamuel.github.io/elastic4s/docs/search/validate.html" target="_blank">Validate</a></td> 
     <td><code>validateIn(&lt;index/type&gt;).query(&lt;query&gt;)</code></td> 
     <td>yes</td> 
     <td>yes</td> 
    </tr>
   </tbody>
  </table> 
  <p>Please also note <a href="https://sksamuel.github.io/elastic4s/docs/misc/javainterop.html" target="_blank">some java interoperability notes</a>.</p> 
  <h2><a id="user-content-connecting-to-a-cluster" class="anchor" href="https://github.com/sksamuel/elastic4s#connecting-to-a-cluster" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connecting to a Cluster</h2> 
  <p>To connect to a stand alone elasticsearch cluster we use the methods on the HttpClient or TcpClient companion objects. For example, <code>TcpClient.transport</code> or <code>HttpClient.apply</code>. These methods accept an instance of <code>ElasticsearchClientUri</code> which specifies the host, port and cluster name of the cluster. The cluster name does not need to be specified if it is the default, which is "elasticsearch" but if you changed it you must specify it in the uri.</p> 
  <p>Please note that the TCP interface uses port 9300 and HTTP uses 9200 (unless of course you have changed these in your cluster).</p> 
  <p>Here is an example of connecting to a TCP cluster with the standard settings.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">TcpClient</span>.transport(<span class="pl-en">ElasticsearchClientUri</span>(<span class="pl-s"><span class="pl-pds">"</span>host1<span class="pl-pds">"</span></span>, <span class="pl-c1">9300</span>))</pre>
  </div> 
  <p>For multiple nodes it's better to use the elasticsearch client uri connection string. This is in the format <code>"elasticsearch://host1:port2,host2:port2,...?param=value&amp;param2=value2"</code>. For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">uri</span> <span class="pl-k">=</span> <span class="pl-en">ElasticsearchClientUri</span>(<span class="pl-s"><span class="pl-pds">"</span>elasticsearch://foo:1234,boo:9876?cluster.name=mycluster<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">TcpClient</span>.transport(uri)</pre>
  </div> 
  <p>If you need to pass settings to the client, then you need to invoke <code>transport</code> with a settings object. For example to specify the cluster name (if you changed the default then you must specify the cluster name).</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.common.settings.</span><span class="pl-v">Settings</span>
<span class="pl-k">val</span> <span class="pl-en">settings</span> <span class="pl-k">=</span> <span class="pl-en">Settings</span>.builder().put(<span class="pl-s"><span class="pl-pds">"</span>cluster.name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>myClusterName<span class="pl-pds">"</span></span>).build()
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">TcpClient</span>.transport(settings, <span class="pl-en">ElasticsearchClientUri</span>(<span class="pl-s"><span class="pl-pds">"</span>elasticsearch://somehost:9300<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <p>If you already have a handle to a Node in the Java API then you can create a client from it easily:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">node</span> <span class="pl-k">=</span> ... <span class="pl-c"><span class="pl-c">//</span> node from the java API somewhere</span>
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">TcpClient</span>.fromNode(node)</pre>
  </div> 
  <p>Here is an example of connecting to a HTTP cluster.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">HttpClient</span>(<span class="pl-en">ElasticsearchClientUri</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">9200</span>))</pre>
  </div> 
  <p>The http client internally uses the Apache Http Client, which we can customize by passing in two callbacks.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">HttpClient</span>(<span class="pl-en">ElasticsearchClientUri</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">9200</span>), <span class="pl-k">new</span> <span class="pl-en">RequestConfigCallback</span> {
    <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">customizeRequestConfig</span>(<span class="pl-v">requestConfigBuilder</span>: <span class="pl-en">Builder</span>) <span class="pl-k">=</span> ...
    }
  }, <span class="pl-k">new</span> <span class="pl-en">HttpClientConfigCallback</span> {
    <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">customizeHttpClient</span>(<span class="pl-v">httpClientBuilder</span>: <span class="pl-en">HttpAsyncClientBuilder</span>) <span class="pl-k">=</span> ...
  })</pre>
  </div> 
  <h2><a id="user-content-x-pack-security" class="anchor" href="https://github.com/sksamuel/elastic4s#x-pack-security" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>X-Pack-Security</h2> 
  <p>Elastic4s also supports the xpack-security add on (TCP client only). To use this, add the <code>elastic-xpack-security</code> dependency to your build and create a client using the <code>XPackElasticClient</code> object instead of the <code>ElasticClient</code> object. Eg,</p> 
  <p>scala</p> 
  <pre><code>val client = XPackElasticClient(settings, uri, &lt;plugins&gt;...)
</code></pre> 
  <p>If you are using SBT then you might need to add a resolver to the elasticsearch repo.</p> 
  <p>scala</p> 
  <pre><code>resolvers += "elasticsearch-releases" at "https://artifacts.elastic.co/maven
</code></pre> 
  <h2><a id="user-content-embedded-node" class="anchor" href="https://github.com/sksamuel/elastic4s#embedded-node" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Embedded Node</h2> 
  <p>A locally configured node and client can be created by including the elastic4s-embedded module. Then a local node can be started by invoking <code>LocalNode()</code> with the cluster name and data path. From the local node we can return a handle to the client by invoking the <code>elastic4sclient</code> function.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.</span><span class="pl-v">ElasticClient</span>
<span class="pl-k">val</span> <span class="pl-en">node</span> <span class="pl-k">=</span> <span class="pl-en">LocalNode</span>(clusterName, pathHome)
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> node.elastic4sclient()</pre>
  </div> 
  <p>To specify settings for the local node you can pass in a settings object like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">settings</span> <span class="pl-k">=</span> <span class="pl-en">Settings</span>.builder()
      .put(<span class="pl-s"><span class="pl-pds">"</span>cluster.name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>elasticsearch<span class="pl-pds">"</span></span>)
      .put(<span class="pl-s"><span class="pl-pds">"</span>path.home<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mypath<span class="pl-pds">"</span></span>)
      .put(<span class="pl-s"><span class="pl-pds">"</span>http.enabled<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>)
      .build()
<span class="pl-k">val</span> <span class="pl-en">node</span> <span class="pl-k">=</span> <span class="pl-en">LocalNode</span>(settings)
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> node.elastic4sclient(&lt;<span class="pl-ent">shutdownNodeOnClose</span>&gt;)</pre>
  </div> 
  <p>If <code>shutdownNodeOnClose</code> is true, then once close is called on the client, the local node will be stopped. Otherwise you will manage the lifecycle of the local node yourself (stopping it before exiting the process).</p> 
  <h2><a id="user-content-create-index" class="anchor" href="https://github.com/sksamuel/elastic4s#create-index" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create Index</h2> 
  <p>All documents in Elasticsearch are stored in an index. We do not need to tell Elasticsearch in advance what an index will look like (eg what fields it will contain) as Elasticsearch will adapt the index dynamically as more documents are added, but we must at least create the index first.</p> 
  <p>To create an index called "places" that is fully dynamic we can simply use:</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute { createIndex(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span>) }</pre>
  </div> 
  <p>We can optionally set the number of shards and / or replicas</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute { createIndex(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span>) shards <span class="pl-c1">3</span> replicas <span class="pl-c1">2</span> }</pre>
  </div> 
  <p>Sometimes we want to specify the properties of the fields in the index in advance. This allows us to manually set the type of the field (where Elasticsearch might infer something else) or set the analyzer used, or multiple other options</p> 
  <p>To do this we add mappings:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.mappings.FieldType.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.</span><span class="pl-v">StopAnalyzer</span>

client.execute {
    createIndex(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span>) mappings (
        mapping(<span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>) as (
            keywordField(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>),
            textField(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>) boost <span class="pl-c1">4</span>,
            textField(<span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>) analyzer <span class="pl-en">StopAnalyzer</span>
        )
    )
}</pre>
  </div> 
  <p>Then Elasticsearch is configured with those mappings for those fields only. It is still fully dynamic and other fields will be created as needed with default options. Only the fields specified will have their type preset.</p> 
  <p>More examples on the create index syntax can be <a href="https://sksamuel.github.io/elastic4s/docs/indices/createindex.html" target="_blank">found here</a>.</p> 
  <h2><a id="user-content-analyzers" class="anchor" href="https://github.com/sksamuel/elastic4s#analyzers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Analyzers</h2> 
  <p>Analyzers control how Elasticsearch parses the fields for indexing. For example, you might decide that you want whitespace to be important, so that "band of brothers" is indexed as a single "word" rather than the default which is to split on whitespace. There are many advanced options available in analayzers. Elasticsearch also allows us to create custom analyzers. For more details <a href="https://sksamuel.github.io/elastic4s/docs/misc/analyzers.html" target="_blank">read about the DSL support for analyzers</a>.</p> 
  <h2><a id="user-content-indexing" class="anchor" href="https://github.com/sksamuel/elastic4s#indexing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Indexing</h2> 
  <p>To index a document we need to specify the index and type and optionally we can set an id. If we don't include an id then elasticsearch will generate one for us. We must also include at least one field. Fields are specified as standard tuples.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  indexInto(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>) id <span class="pl-s"><span class="pl-pds">"</span>uk<span class="pl-pds">"</span></span> fields (
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>London<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>United Kingdom<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>continent<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>Europe<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>status<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>Awesome<span class="pl-pds">"</span></span>
  )
}</pre>
  </div> 
  <p>There are many additional options we can set such as routing, version, parent, timestamp and op type. See <a href="http://www.elasticsearch.org/guide/reference/api/index_/" target="_blank">official documentation</a> for additional options, all of which exist in the DSL as keywords that reflect their name in the official API.</p> 
  <h2><a id="user-content-indexing-typeclass" class="anchor" href="https://github.com/sksamuel/elastic4s#indexing-typeclass" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Indexing Typeclass</h2> 
  <p>Sometimes it is useful to index directly from your domain model, and not have to create maps of fields inline. For this elastic4s provides the <code>Indexable</code> typeclass. Simply provide an implicit instance of <code>Indexable[T]</code> in scope for any class T that you wish to index, and then you can use <code>doc(t)</code> on the index request. For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> a simple example of a domain model</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Character</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">location</span>: <span class="pl-k">String</span>)

<span class="pl-c"><span class="pl-c">//</span> how you turn the type into json is up to you</span>
<span class="pl-k">implicit</span> <span class="pl-k">object</span> <span class="pl-en">CharacterIndexable</span> <span class="pl-k">extends</span> <span class="pl-e">Indexable</span>[<span class="pl-en">Character</span>] {
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">json</span>(<span class="pl-v">t</span>: <span class="pl-en">Character</span>)<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> s<span class="pl-s"><span class="pl-pds">"""</span> { "name" : "${t.name}", "location" : "${t.location}" } <span class="pl-pds">"""</span></span>
}

<span class="pl-c"><span class="pl-c">//</span> now the index request reads much cleaner</span>
<span class="pl-k">val</span> <span class="pl-en">jonsnow</span> <span class="pl-k">=</span> <span class="pl-en">Character</span>(<span class="pl-s"><span class="pl-pds">"</span>jon snow<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>the wall<span class="pl-pds">"</span></span>)
client.execute {
  indexInto(<span class="pl-s"><span class="pl-pds">"</span>gameofthrones<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>characters<span class="pl-pds">"</span></span>).doc(jonsnow)
}</pre>
  </div> 
  <p>Some people prefer to write typeclasses manually for the types they need to support. Other people like to just have it done automagically. For those people, elastic4s provides extensions for the well known Scala Json libraries that can be used to generate Json generically.</p> 
  <p>Simply add the import for your chosen library below and then with those implicits in scope, you can now pass any type you like to <code>doc</code> and an Indexable will be derived automatically.</p> 
  <table> 
   <thead> 
    <tr> 
     <th>Library</th> 
     <th>Elastic4s Module</th> 
     <th>Import</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><a href="https://github.com/FasterXML/jackson-module-scala" target="_blank">Jackson</a></td> 
     <td><a href="http://search.maven.org/#search%7Cga%7C1%7Celastic4s-jackson" target="_blank">elastic4s-jackson</a></td> 
     <td>import ElasticJackson.Implicits._</td> 
    </tr> 
    <tr> 
     <td><a href="http://json4s.org/" target="_blank">Json4s</a></td> 
     <td><a href="http://search.maven.org/#search%7Cga%7C1%7Celastic4s-json4s" target="_blank">elastic4s-json4s</a></td> 
     <td>import ElasticJson4s.Implicits._</td> 
    </tr> 
    <tr> 
     <td><a href="https://github.com/travisbrown/circe" target="_blank">Circe</a></td> 
     <td><a href="http://search.maven.org/#search%7Cga%7C1%7Celastic4s-circe" target="_blank">elastic4s-circe</a></td> 
     <td>import io.circe.generic.auto._ <br>import com.sksamuel.elastic4s.circe._</td> 
    </tr>
   </tbody>
  </table> 
  <h2><a id="user-content-searching" class="anchor" href="https://github.com/sksamuel/elastic4s#searching" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Searching</h2> 
  <p>Searching is naturally the most involved operation. There are many ways to do <a href="http://www.elasticsearch.org/guide/reference/api/search/" target="_blank">searching in elastic search</a> and that is reflected in the higher complexity of the query DSL.</p> 
  <p>To do a simple text search, where the query is parsed from a single string</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>).query(<span class="pl-s"><span class="pl-pds">"</span>London<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>That is actually an example of a SimpleStringQueryDefinition. The string is implicitly converted to that type of query. It is the same as specifying the query type directly:</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>),query(simpleStringQuery(<span class="pl-s"><span class="pl-pds">"</span>London<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <p>The simple string example is the only time we don't need to specify the query type. We can search for everything by not specifying a query at all.</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>We might want to limit the number of results and / or set the offset.</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>) query <span class="pl-s"><span class="pl-pds">"</span>paris<span class="pl-pds">"</span></span> start <span class="pl-c1">5</span> limit <span class="pl-c1">10</span></pre>
  </div> 
  <p>We can search against certain fields only:</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>) query termQuery(<span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>France<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Or by a prefix:</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>) query prefixQuery(<span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>France<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Or by a regular expression (slow, but handy sometimes!):</p> 
  <div class="highlight highlight-source-scala">
   <pre>search(<span class="pl-s"><span class="pl-pds">"</span>places<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>cities<span class="pl-pds">"</span></span>) query regexQuery(<span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>France<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>There are many other types, such as range for numeric fields, wildcards, distance, geo shapes, matching.</p> 
  <p>Read more about search syntax: <a href="https://sksamuel.github.io/elastic4s/docs/search/search.html" target="_blank">Search</a> Read about <a href="https://sksamuel.github.io/elastic4s/docs/search/multisearch.html" target="_blank">Multisearch</a>. Read about <a href="https://sksamuel.github.io/elastic4s/docs/search/suggestions.html" target="_blank">Suggestions</a>.</p> 
  <h2><a id="user-content-hitreader-typeclass" class="anchor" href="https://github.com/sksamuel/elastic4s#hitreader-typeclass" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>HitReader Typeclass</h2> 
  <p>By default Elasticsearch search responses contain an array of <code>SearchHit</code> instances which contain things like the id, index, type, version, etc as well as the document source as a string or map. Elastic4s provides a means to convert these back to meaningful domain types quite easily using the <code>HitReader[T]</code> typeclass.</p> 
  <p>Provide an implementation of this typeclass, as an in scope implicit, for whatever type you wish to marshall search responses into, and then you can call <code>to[T]</code> or <code>safeTo[T]</code> on the response. The difference between to and safeTo is that to will drop any errors and just return successful conversions, whereas safeTo returns a sequence of <code>Either[Throwable, T]</code>.</p> 
  <p>A full example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Character</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">location</span>: <span class="pl-k">String</span>)

<span class="pl-k">implicit</span> <span class="pl-k">object</span> <span class="pl-en">CharacterHitReader</span> <span class="pl-k">extends</span> <span class="pl-e">HitReader</span>[<span class="pl-en">Character</span>] {
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">read</span>(<span class="pl-v">hit</span>: <span class="pl-en">Hit</span>)<span class="pl-k">:</span> <span class="pl-en">Either</span>[<span class="pl-en">Throwable</span>, <span class="pl-en">Character</span>] <span class="pl-k">=</span> {
    <span class="pl-en">Right</span>(<span class="pl-en">Character</span>(hit.sourceAsMap(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>).toString, hit.sourceAsMap(<span class="pl-s"><span class="pl-pds">"</span>location<span class="pl-pds">"</span></span>).toString))
  }
}

<span class="pl-k">val</span> <span class="pl-en">resp</span> <span class="pl-k">=</span> client.execute {
  search(<span class="pl-s"><span class="pl-pds">"</span>gameofthrones<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>characters<span class="pl-pds">"</span></span>).query(<span class="pl-s"><span class="pl-pds">"</span>kings landing<span class="pl-pds">"</span></span>)
}.await <span class="pl-c"><span class="pl-c">//</span> don't block in real code</span>

<span class="pl-c"><span class="pl-c">//</span> .to[Character] will look for an implicit HitReader[Character] in scope</span>
<span class="pl-c"><span class="pl-c">//</span> and then convert all the hits into Characters for us.</span>
<span class="pl-k">val</span> <span class="pl-en">characters</span> <span class="pl-k">:</span><span class="pl-en">Seq</span>[<span class="pl-en">Character</span>] <span class="pl-k">=</span> resp.to[<span class="pl-en">Character</span>]
</pre>
  </div> 
  <p>This is basically the inverse of the <code>Indexable</code> typeclass. And just like Indexable, the json modules provide implementations out of the box for any types. The imports are the same as for the Indexable typeclasses.</p> 
  <p>As a bonus feature of the Jackson implementation, if your domain object has fields called <code>_timestamp</code>, <code>_id</code>, <code>_type</code>, <code>_index</code>, or <code>_version</code> then those special fields will be automatically populated as well.</p> 
  <h2><a id="user-content-highlighting" class="anchor" href="https://github.com/sksamuel/elastic4s#highlighting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Highlighting</h2> 
  <p>Elasticsearch can annotate results to show which part of the results matched the queries by using highlighting. Just think when you're in google and you see the snippets underneath your results - that's what highlighting does.</p> 
  <p>We can use this very easily, just add a highlighting definition to your search request, where you set the field or fields to be highlighted. Viz:</p> 
  <div class="highlight highlight-source-scala">
   <pre>search in <span class="pl-s"><span class="pl-pds">"</span>music<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>bios<span class="pl-pds">"</span></span> query <span class="pl-s"><span class="pl-pds">"</span>kate bush<span class="pl-pds">"</span></span> highlighting (
  highlight field <span class="pl-s"><span class="pl-pds">"</span>body<span class="pl-pds">"</span></span> fragmentSize <span class="pl-c1">20</span>
)</pre>
  </div> 
  <p>All very straightforward. There are many options you can use to tweak the results. In the example above I have simply set the snippets to be taken from the field called "body" and to have max length 20. You can set the number of fragments to return, seperate queries to generate them and other things. See the elasticsearch page on <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-highlighting.html" target="_blank">highlighting</a> for more info.</p> 
  <h2><a id="user-content-get" class="anchor" href="https://github.com/sksamuel/elastic4s#get" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get</h2> 
  <p>Sometimes we don't want to search and want to retrieve a document directly from the index by id. In this example we are retrieving the document with id 'coldplay' from the bands/rock index and type.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
 get(<span class="pl-s"><span class="pl-pds">"</span>coldplay<span class="pl-pds">"</span></span>).from(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>rock<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <p>We can get multiple documents at once too. Notice the following multiget wrapping block.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  multiget(
    get(<span class="pl-s"><span class="pl-pds">"</span>coldplay<span class="pl-pds">"</span></span>).from(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>rock<span class="pl-pds">"</span></span>),
    get(<span class="pl-s"><span class="pl-pds">"</span>keane<span class="pl-pds">"</span></span>).from(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>rock<span class="pl-pds">"</span></span>)
  )
}</pre>
  </div> 
  <p>See more <a href="https://sksamuel.github.io/elastic4s/docs/document/get.html" target="_blank">get examples</a> and usage of <a href="https://sksamuel.github.io/elastic4s/docs/document/multiget.html" target="_blank">Multiget</a> here.</p> 
  <h2><a id="user-content-deleting" class="anchor" href="https://github.com/sksamuel/elastic4s#deleting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Deleting</h2> 
  <p>In the rare case that we become tired of a band we might want to remove them. Naturally we wouldn't want to remove Chris Martin and boys so we're going to remove U2 instead. We think they're a little past their best (controversial). This operation assumes the id of the document is "u2".</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  delete(<span class="pl-s"><span class="pl-pds">"</span>u2<span class="pl-pds">"</span></span>).from(<span class="pl-s"><span class="pl-pds">"</span>bands/rock<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <p>We can take this a step further by deleting by a query rather than id. In this example we're deleting all bands where their type is pop.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  deleteIn(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span>).by(termQuery(<span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pop<span class="pl-pds">"</span></span>))
}</pre>
  </div> 
  <p>See more about delete on the <a href="https://sksamuel.github.io/elastic4s/docs/document/delete.html" target="_blank">delete page</a></p> 
  <h2><a id="user-content-updates" class="anchor" href="https://github.com/sksamuel/elastic4s#updates" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Updates</h2> 
  <p>We can update existing documents without having to do a full index, by updating a partial set of fields.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  update(<span class="pl-c1">25</span>).in(<span class="pl-s"><span class="pl-pds">"</span>scifi<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>starwars<span class="pl-pds">"</span></span>). docAsUpsert (
    <span class="pl-s"><span class="pl-pds">"</span>character<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>chewie<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>race<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>wookie<span class="pl-pds">"</span></span>
  )
}</pre>
  </div> 
  <p>For more examples see the <a href="https://sksamuel.github.io/elastic4s/docs/document/update.html" target="_blank">Update</a> page.</p> 
  <h2><a id="user-content-more-like-this" class="anchor" href="https://github.com/sksamuel/elastic4s#more-like-this" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>More like this</h2> 
  <p>If you want to return documents that are "similar" to a current document we can do that very easily with the more like this query.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  search(<span class="pl-s"><span class="pl-pds">"</span>drinks<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>beer<span class="pl-pds">"</span></span>) query {
    moreLikeThisQuery(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>).likeTexts(<span class="pl-s"><span class="pl-pds">"</span>coors<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>beer<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>molson<span class="pl-pds">"</span></span>) minTermFreq <span class="pl-c1">1</span> minDocFreq <span class="pl-c1">1</span>
  }
}</pre>
  </div> 
  <p>For all the options see <a href="http://www.elasticsearch.org/guide/reference/query-dsl/mlt-query/" target="_blank">here</a>.</p> 
  <h2><a id="user-content-bulk-operations" class="anchor" href="https://github.com/sksamuel/elastic4s#bulk-operations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Bulk Operations</h2> 
  <p>Elasticsearch is fast. Roundtrips are not. Sometimes we want to wrestle every last inch of performance and a useful way to do this is to batch up requests. Elastic has guessed our wishes and created the bulk API. To do this we simply wrap index, delete and update requests using the <code>bulk</code> keyword and pass to the <code>execute</code> method in the client.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.execute {
  bulk (
    index into <span class="pl-s"><span class="pl-pds">"</span>bands/rock<span class="pl-pds">"</span></span> fields <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">-</span><span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">"</span>coldplay<span class="pl-pds">"</span></span>,
    index into <span class="pl-s"><span class="pl-pds">"</span>bands/rock<span class="pl-pds">"</span></span> fields <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">-</span><span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">"</span>kings of leon<span class="pl-pds">"</span></span>,
    index into <span class="pl-s"><span class="pl-pds">"</span>bands/pop<span class="pl-pds">"</span></span> fields (
      <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>elton john<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>best_album<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>tumbleweed connection<span class="pl-pds">"</span></span>
    )
  )
}</pre>
  </div> 
  <p>A single HTTP or TCP request is now needed for 4 operations. In addition Elasticsearch can now optimize the requests, by combinging inserts or using aggressive caching.</p> 
  <p>The example above uses simple documents just for clarity of reading; the usual optional settings can still be used. See more information on the <a href="https://sksamuel.github.io/elastic4s/docs/document/bulk.html" target="_blank">Bulk</a>.</p> 
  <h2><a id="user-content-json-output" class="anchor" href="https://github.com/sksamuel/elastic4s#json-output" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Json Output</h2> 
  <p>It can be useful to see the json output of requests in case you wish to tinker with the request in a REST client or your browser. It can be much easier to tweak a complicated query when you have the instant feedback of the HTTP interface.</p> 
  <p>Elastic4s makes it easy to get this json where possible. Simply invoke the <code>show</code> method on the client with a request to get back a json string. Eg:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> client.show {
  search(<span class="pl-s"><span class="pl-pds">"</span>music<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span>) query <span class="pl-s"><span class="pl-pds">"</span>coldplay<span class="pl-pds">"</span></span>
}
println(json)</pre>
  </div> 
  <p>Not all requests have a json body. For example <em>get-by-id</em> is modelled purely by http query parameters, there is no json body to output. And some requests aren't supported by the show method - you will get an implicit not found error during compliation if that is the case</p> 
  <p>Also, as a reminder, the TCP client does not send JSON to the nodes, it uses a binary protocol, so the provided JSON should be used as a debugging tool only. For the HTTP client the output is exactly what is sent.</p> 
  <h2><a id="user-content-synchronous-operations" class="anchor" href="https://github.com/sksamuel/elastic4s#synchronous-operations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Synchronous Operations</h2> 
  <p>All operations are normally asynchronous. Sometimes though you might want to block - for example when doing snapshots or when creating the initial index. You can call <code>.await</code> on any operation to block until the result is ready. This is especially useful when testing.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">resp</span> <span class="pl-k">=</span> client.execute {
  index(<span class="pl-s"><span class="pl-pds">"</span>bands<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>rock<span class="pl-pds">"</span></span>) fields (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">-</span><span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">"</span>coldplay<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debut<span class="pl-pds">"</span></span><span class="pl-k">-</span><span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">"</span>parachutes<span class="pl-pds">"</span></span>)
}.await</pre>
  </div> 
  <h2><a id="user-content-search-iterator" class="anchor" href="https://github.com/sksamuel/elastic4s#search-iterator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Search Iterator</h2> 
  <p>Sometimes you may wish to iterate over all the results in a search, without worrying too much about handling futures, and re-requesting via a scroll. The <code>SearchIterator</code> will do this for you, although it will block between requests. A search iterator is just an implementation of <code>scala.collection.Iterator</code> backed by elasticsearch queries.</p> 
  <p>To create one, use the iterate method on the companion object, passing in the http client, and a search request to execute. The search request must specify a keep alive value (which is used by elasticsearch for scrolling).</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">reader</span> <span class="pl-k">:</span> <span class="pl-en">HitReader</span>[<span class="pl-en">MyType</span>] <span class="pl-k">=</span>  ...
<span class="pl-k">val</span> <span class="pl-en">iterator</span> <span class="pl-k">=</span> <span class="pl-en">SearchIterator</span>.iterate[<span class="pl-en">MyType</span>](client, search(index).matchAllQuery.keepAlive(<span class="pl-s"><span class="pl-pds">"</span>1m<span class="pl-pds">"</span></span>).size(<span class="pl-c1">50</span>))
iterator.foreach(println)</pre>
  </div> 
  <p>For instance, in the above we are bringing back all documents in the index, 50 results at a time, marshalled into instances of <code>MyType</code> using the implicit <code>HitReader</code> (see the section on HitReaders). If you want just the raw elasticsearch <code>Hit</code> object, then use <code>SearchIterator.hits</code></p> 
  <p>Note: Whenever the results in a particular batch have been iterated on, the <code>SearchIterator</code> will then execute another query for the next batch and block waiting on that query. So if you are looking for a pure non blocking solution, consider the reactive streams implementation. However, if you just want a quick and simple way to iterate over some data without bringing back all the results at once <code>SearchIterator</code> is perfect.</p> 
  <h2><a id="user-content-dsl-completeness" class="anchor" href="https://github.com/sksamuel/elastic4s#dsl-completeness" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>DSL Completeness</h2> 
  <p>As it stands the Scala DSL covers all of the common operations - index, create, delete, delete by query, search, validate, percolate, update, explain, get, and bulk operations. There is good support for the various settings for each of these - more so than the Java client provides in the sense that more settings are provided in a type safe manner.</p> 
  <p>However there are settings and operations (mostly admin / cluster related) that the DSL does not yet cover (pull requests welcome!). In these cases it is necessary to drop back to the Java API. This can be done by calling .java on the client object to get the underlying java elastic client,</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.java.admin.cluster.prepareHealth.setWaitForEvents(<span class="pl-en">Priority</span>.<span class="pl-en">LANGUID</span>).setWaitForGreenStatus().execute().actionGet</pre>
  </div> 
  <p>This way you can still access everything the normal Java client covers in the cases where the Scala DSL is missing a construct, or where there is no need to provide a DSL.</p> 
  <h2><a id="user-content-elastic-reactive-streams" class="anchor" href="https://github.com/sksamuel/elastic4s#elastic-reactive-streams" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Elastic Reactive Streams</h2> 
  <p>Elastic4s has an implementation of the <a href="http://www.reactive-streams.org" target="_blank">reactive streams</a> api for both publishing and subscribing that is built using Akka. To use this, you need to add a dependency on the elastic4s-streams module.</p> 
  <p>There are two things you can do with the reactive streams implementation. You can create an elastic subscriber, and have that stream data from some publisher into elasticsearch. Or you can create an elastic publisher and have documents streamed out to subscribers.</p> 
  <h3><a id="user-content-integrate" class="anchor" href="https://github.com/sksamuel/elastic4s#integrate" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Integrate</h3> 
  <p>First you have to add an additional dependeny to your <code>build.sbt</code></p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-streams<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>x.x.x<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>or</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-http-streams<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>x.x.x<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Import the new API with</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.sksamuel.elastic4s.streams.ReactiveElastic.</span><span class="pl-v">_</span></pre>
  </div> 
  <h3><a id="user-content-publisher" class="anchor" href="https://github.com/sksamuel/elastic4s#publisher" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Publisher</h3> 
  <p>An elastic publisher can be created for any arbitrary query you wish, and then using the efficient search scroll API, the entire dataset that matches your query is streamed out to subscribers.</p> 
  <p>And make sure you have an Akka Actor System in implicit scope</p> 
  <p><code>implicit val system = ActorSystem()</code></p> 
  <p>Then create a publisher from the client using any query you want. You must specify the scroll parameter, as the publisher uses the scroll API.</p> 
  <p><code>val publisher = client.publisher(search in "myindex" query "sometext" scroll "1m")</code></p> 
  <p>Now you can add subscribers to this publisher. They can of course be any type that adheres to the reactive-streams api, so you could stream out to a mongo database, or a filesystem, or whatever custom type you want.</p> 
  <p><code>publisher.subscribe(someSubscriber)</code></p> 
  <p>If you just want to stream out an entire index then you can use the overloaded form:</p> 
  <p><code>val publisher = client.publisher("index1", keepAlive = "1m")</code></p> 
  <h3><a id="user-content-subscription" class="anchor" href="https://github.com/sksamuel/elastic4s#subscription" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Subscription</h3> 
  <p>An elastic subcriber can be created that will stream a request to elasticsearch for each item produced by a publisher. The subscriber can create index, update, or delete requests, so is a good way to synchronize datasets.</p> 
  <p><code>import ReactiveElastic._</code></p> 
  <p>And make sure you have an Akka Actor System in implicit scope.</p> 
  <p><code>implicit val system = ActorSystem()</code></p> 
  <p>Then create a subscriber, specifying the following parameters:</p> 
  <ul> 
   <li>A type parameter that is the type of object that the publisher will provide</li> 
   <li>How many documents should be included per index batch (10-100 is usually good)</li> 
   <li>How many concurrent batches should be in flight (usually around the number of cores)</li> 
   <li>An optional <code>ResponseListener</code> that will be notified for each item that was successfully acknowledged by the es cluster</li> 
   <li>An optional function that will be called once the subscriber has received all data. Defaults to a no-op</li> 
   <li>An optional function to call if the subscriber encouters an error. Defaults to a no-op.</li> 
  </ul> 
  <p>In addition there should be a further implicit in scope of type <code>RequestBuilder[T]</code> that will accept objects of T (the type produced by your publisher) and build an index, update, or delete request suitable for dispatchin to elasticsearch.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">builder</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">RequestBuilder</span>[<span class="pl-en">SomeType</span>] {
  <span class="pl-k">import</span> <span class="pl-v">ElasticDsl.</span><span class="pl-v">_</span>
  <span class="pl-c"><span class="pl-c">//</span> the request returned doesn't have to be an index - it can be anything supported by the bulk api</span>
  <span class="pl-k">def</span> <span class="pl-en">request</span>(<span class="pl-v">t</span>: <span class="pl-en">T</span>)<span class="pl-k">:</span> <span class="pl-en">BulkCompatibleDefinition</span> <span class="pl-k">=</span>  index into <span class="pl-s"><span class="pl-pds">"</span>index<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> fields ....
}</pre>
  </div> 
  <p>Then the subscriber can be created, and attached to a publisher:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">subscriber</span> <span class="pl-k">=</span> client.subscriber[<span class="pl-en">SomeType</span>](batchSize, concurrentBatches, () <span class="pl-k">=&gt;</span> println <span class="pl-s"><span class="pl-pds">"</span>all done<span class="pl-pds">"</span></span>)
publisher.subscribe(subscriber)</pre>
  </div> 
  <h2><a id="user-content-using-elastic4s-in-your-project" class="anchor" href="https://github.com/sksamuel/elastic4s#using-elastic4s-in-your-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using Elastic4s in your project</h2> 
  <p>For gradle users, add (replace 2.12 with 2.11 for Scala 2.11):</p> 
  <div class="highlight highlight-source-groovy">
   <pre>compile <span class="pl-s"><span class="pl-pds">'</span>com.sksamuel.elastic4s:elastic4s-core_2.12:x.x.x<span class="pl-pds">'</span></span></pre>
  </div> 
  <p>For SBT users simply add:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.sksamuel.elastic4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>elastic4s-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>x.x.x<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For Maven users simply add (replace 2.12 with 2.11 for Scala 2.11):</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.sksamuel.elastic4s&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;elastic4s-core_2.12&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;x.x.x&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>Check for the latest released versions on <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.sksamuel.elastic4s%22" target="_blank">maven central</a></p> 
  <h2><a id="user-content-building-and-testing" class="anchor" href="https://github.com/sksamuel/elastic4s#building-and-testing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building and Testing</h2> 
  <p>This project is built with SBT. So to build</p> 
  <pre><code>sbt compile
</code></pre> 
  <p>And to test</p> 
  <pre><code>sbt test
</code></pre> 
  <p>Integration tests run on a local elastic that is created and torn down as part of the tests inside your standard temp folder. There is no need to configure anything externally.</p> 
  <h2><a id="user-content-changelog" class="anchor" href="https://github.com/sksamuel/elastic4s#changelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Changelog</h2> 
  <h6><a id="user-content-600---pre-release" class="anchor" href="https://github.com/sksamuel/elastic4s#600---pre-release" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>6.0.0 - Pre-release</h6> 
  <ul> 
   <li>HTTP Client should now be the first choice client. The TCP Client is likely to be deprecated in a future release - see <a href="https://www.elastic.co/blog/state-of-the-official-elasticsearch-java-clients" target="_blank">https://www.elastic.co/blog/state-of-the-official-elasticsearch-java-clients</a>. Notably,</li> 
  </ul> 
  <blockquote> 
   <p>The Java REST client is the future for Java users of Elasticsearch. Please get involved and try out the high-level client as soon as it becomes available, as your feedback will help us to make it better faster. As soon as the REST client is feature complete and is mature enough to replace the Java API entirely, we will deprecate and finally remove the transport client and the Java API.</p> 
  </blockquote> 
  <ul> 
   <li>HTTP Client no longer has a dependency on the main elasticsearch jars - no more version clashes (netty!) and a hugely reduced footprint.</li> 
   <li>Any methods deprecated before version 5.0.0 have been removed.</li> 
   <li>Operations that accept an index and a type have been deprecated in favour of index only operations. This is because Elasticsearch plan to remove types in version 7, and in version 6 you are limited to a single type per index. See - <a href="https://www.elastic.co/blog/elasticsearch-6-0-0-alpha1-released" target="_blank">https://www.elastic.co/blog/elasticsearch-6-0-0-alpha1-released</a></li> 
   <li>Deprecated implicit conversion of a tuple to an index/type has been removed. So instead of "index" -&gt; "type", you should use "index" / "type", which has been the default since 2.4.0. Or even better, don't use the type at all anymore, see point above.</li> 
   <li>The String field type has been removed, which has been deprecated since 5.0.0. Use textField or keywordField.</li> 
   <li>Added doc values to search requests</li> 
   <li>Reworked the HTTP aggregation response API to support better types and subaggs</li> 
   <li>disableCoord has been removed from bool and common term queries</li> 
   <li>Added getIndex request type</li> 
  </ul> 
  <h6><a id="user-content-545" class="anchor" href="https://github.com/sksamuel/elastic4s#545" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.4.5</h6> 
  <ul> 
   <li>UnmappableCharacterException when operating non-ASCII characters #928. This would cause exceptions if your requests had non-ascii characters and was introduced in 5.4.3.</li> 
  </ul> 
  <h6><a id="user-content-544" class="anchor" href="https://github.com/sksamuel/elastic4s#544" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.4.4</h6> 
  <ul> 
   <li>TCP Client was not setting types correctly for delete by query #942</li> 
   <li>HTTP Update was not setting script correctly #930</li> 
   <li>Elasticsearch Client URI now supports SSL for the HTTP client #932</li> 
   <li>IndicesOptions was not being set on search correctly for HTTP #943</li> 
   <li>More like this query now supports routing on items</li> 
   <li>Fixed ScoreMode.TOTAL serialization for HTTP #937</li> 
   <li>Upgraded to Elastic 5.4.1 to fix #939</li> 
  </ul> 
  <h6><a id="user-content-543" class="anchor" href="https://github.com/sksamuel/elastic4s#543" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.4.3</h6> 
  <ul> 
   <li>Can extract aggregations as a JSON string</li> 
  </ul> 
  <h6><a id="user-content-542" class="anchor" href="https://github.com/sksamuel/elastic4s#542" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.4.2</h6> 
  <ul> 
   <li>Added http streams implementation; available as <code>elastic-http-streams</code> module</li> 
   <li>Bulk items to show full response in http</li> 
  </ul> 
  <h6><a id="user-content-541" class="anchor" href="https://github.com/sksamuel/elastic4s#541" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.4.1</h6> 
  <ul> 
   <li>Added get mapping to http</li> 
   <li>Added index recovery to http</li> 
   <li>Added force merge to http</li> 
   <li>Terms agg now supports easier custom ordering #440</li> 
  </ul> 
  <h6><a id="user-content-540" class="anchor" href="https://github.com/sksamuel/elastic4s#540" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.4.0</h6> 
  <ul> 
   <li>Http Client is now considered production ready and no longer marked as experimental.</li> 
   <li>Get all indices with their alias #871</li> 
   <li>added cat shards, plugins, nodes, thread pool, health, alloc, aliases, master and indices #872</li> 
   <li>Added search template #894</li> 
   <li>FieldsMapper doesn't handle null #899</li> 
   <li>Multisearch now sets from/size properly #901</li> 
   <li>Add simple category contexts for completion suggestions</li> 
   <li>#786 #792 #832 Internal json marshalling now via jackson</li> 
   <li>Added match none query #893</li> 
   <li>Keywords are docvalued by default</li> 
   <li>Implement field collapsing introduced in 5.3.0</li> 
   <li>fix StackOverflowError for GeoBoundingBoxQueryDefinition.corners(GeoPoint, GeoPoint)</li> 
   <li>In exponential decay score the decay is disregarded when offset was not provided #883</li> 
   <li>failureMessageOpt in RichBulkResponse doesn't work as an option #890</li> 
   <li>#884 Added global suggestion text</li> 
  </ul> 
  <h6><a id="user-content-532" class="anchor" href="https://github.com/sksamuel/elastic4s#532" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.3.2</h6> 
  <ul> 
   <li>Fix spray-json method names</li> 
   <li>Added support of range aggregation for http client</li> 
   <li>Bumped sbt version to 0.13.15</li> 
   <li>Bumped Scala version to 2.12.2</li> 
   <li>Support inner highlight</li> 
   <li>Fixes 'type' and 'matched_fields' for highlight query.</li> 
   <li>Added support of HDR percentiles aggregation (tcp only)</li> 
  </ul> 
  <h6><a id="user-content-531" class="anchor" href="https://github.com/sksamuel/elastic4s#531" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.3.1</h6> 
  <ul> 
   <li>Updated rich search responses to throw exceptions on bad <code>to</code></li> 
   <li>client should handle integers in range queries #865</li> 
   <li>Added max bucket agg builder for http</li> 
   <li>pipeline aggregation regression #838</li> 
  </ul> 
  <h6><a id="user-content-530" class="anchor" href="https://github.com/sksamuel/elastic4s#530" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.3.0</h6> 
  <ul> 
   <li>Added top hits aggs support to http #857</li> 
   <li>Added support for {dynamic_type} in dynamic templates? #519</li> 
   <li>Added clearScroll implementation for http client.</li> 
   <li>Removing id property as cannot be send to ES anymore.</li> 
   <li>DateHistogramAggregation support for HttpClient</li> 
   <li>PutMapping implementation in Http client</li> 
   <li>Implemented support for spray-json</li> 
   <li>use utf-8 for http entities instead of system encoding</li> 
   <li>make <code>RichSearchHit#fieldValueOpt</code> return an <code>Option[AnyRef]</code></li> 
   <li>Enable parallel tests</li> 
   <li>DateRangeAggregation support for multiple unbounded ranges</li> 
   <li>Added parent support for http client bulk request.</li> 
   <li>Remove deprecation warning for FuzzyQuery</li> 
   <li>Starting embedded node with <code>http.enabled: false</code> crashes with NPE #781</li> 
   <li>Object and nested fields broken in 5.2.11 #819</li> 
   <li>npe in terms aggregation #828</li> 
   <li>Adding publishMicrosite to release process</li> 
   <li>Handle http client failures by endpoint</li> 
   <li>#821 Fixed omitted <code>value</code> field in RegexQuery serialization</li> 
   <li>Add raw query support for HTTP</li> 
   <li>#565 create index from raw json string</li> 
   <li>Added index template to http</li> 
   <li>Added span within and span containing queries to tcp</li> 
   <li>Added span containing query to http</li> 
   <li>Added span not, span within, and span or queries to http</li> 
   <li>Added parent id query to http</li> 
   <li>Added script query to http</li> 
   <li>added geo bounding box query to http</li> 
  </ul> 
  <h6><a id="user-content-5212" class="anchor" href="https://github.com/sksamuel/elastic4s#5212" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.12</h6> 
  <ul> 
   <li>Add index template support to the HTTP client</li> 
   <li>Added span, geo, parent id and script queries to http</li> 
   <li>Fixed regression on object field definitions</li> 
   <li>Fixed NPE when local node is started with http false</li> 
   <li>Fixed error on get alias when index does not exist</li> 
   <li>Added <code>RequestConfigCallback</code> and <code>HttpClientConfigCallback</code> support to the HTTP client</li> 
  </ul> 
  <h6><a id="user-content-5211" class="anchor" href="https://github.com/sksamuel/elastic4s#5211" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.11</h6> 
  <ul> 
   <li>Added more like this and nested query to http</li> 
   <li>Made <code>score</code> available in Hit (for use by HitReader)</li> 
   <li>Added addalias, getalias and alias exists for http</li> 
   <li>Added cluster state and cluster health for http client</li> 
   <li>Added node stats to http</li> 
   <li>Added shard store to http</li> 
   <li>Updated field definitions to be immutable case classes, adding missing 5.x properties; removed obsolete 2.x properties</li> 
   <li>Added support for unified http and tcp test suite</li> 
   <li>Added normalizer support</li> 
   <li>Minor circe improvements</li> 
   <li>Update Index Level support to http</li> 
   <li>Added <code>missing</code> and <code>filter</code> aggregation to http</li> 
   <li>Updated range query with missing fields</li> 
   <li>Set content type to JSON for all http requests</li> 
  </ul> 
  <h6><a id="user-content-5210" class="anchor" href="https://github.com/sksamuel/elastic4s#5210" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.10</h6> 
  <ul> 
   <li>Added explain requests to http</li> 
   <li>Added tasks api to http</li> 
   <li>Removed old multifield syntax, use only the 5.x compatible syntax</li> 
   <li>Fixed regression in subaggregations in 5.2.9</li> 
   <li>Removed <code>_id</code> field as this is no longer customisable</li> 
   <li>Added <code>minmax</code>, <code>cardinality</code> and <code>value count</code> aggregations</li> 
   <li>Added UUID support to buildable terms query</li> 
   <li>Added search iterator for http and restored Iterable Search for tcp</li> 
  </ul> 
  <h6><a id="user-content-529" class="anchor" href="https://github.com/sksamuel/elastic4s#529" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.9</h6> 
  <ul> 
   <li>Initial aggs for http with <code>terms</code> and <code>sum</code> aggs</li> 
   <li>Fixed source filtering on http get</li> 
  </ul> 
  <h6><a id="user-content-528" class="anchor" href="https://github.com/sksamuel/elastic4s#528" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.8</h6> 
  <ul> 
   <li>Highlight support added to Http Client</li> 
   <li>Fix for raw query</li> 
   <li>Range query and Terms query added to http client</li> 
   <li>Elements arg fix in reactive streams</li> 
   <li>VersionType added to index requests</li> 
   <li>Optional deps fixed for http client</li> 
  </ul> 
  <h6><a id="user-content-527" class="anchor" href="https://github.com/sksamuel/elastic4s#527" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.7</h6> 
  <ul> 
   <li>Fixed bug in hit reader and tuples</li> 
   <li>Added flush index, delete index, clear cache to http client</li> 
   <li>Added index exists and type exists requests to http client</li> 
   <li>Added validate support to http client</li> 
   <li>Supporting has_child, has_parent, dismax, fuzzy and boosting query types in http client</li> 
   <li>Search scroll added to http client</li> 
   <li>Added keyed filters aggregation to TCP client</li> 
  </ul> 
  <h6><a id="user-content-526" class="anchor" href="https://github.com/sksamuel/elastic4s#526" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.6</h6> 
  <ul> 
   <li>Fixed bug with source excludes since 5.2.0</li> 
   <li>Fixed HTTPS bug in http client</li> 
   <li>Added client.show to TCP client</li> 
   <li>Added constant score query suppor to http client</li> 
  </ul> 
  <h6><a id="user-content-520" class="anchor" href="https://github.com/sksamuel/elastic4s#520" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.2.0</h6> 
  <ul> 
   <li>Supports Elasticsearch 5.2.x</li> 
   <li>Added experimental HTTP client</li> 
  </ul> 
  <h6><a id="user-content-515" class="anchor" href="https://github.com/sksamuel/elastic4s#515" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.1.5</h6> 
  <ul> 
   <li>Fixed filter in add alias</li> 
  </ul> 
  <h6></h6> 
  <ul> 
   <li>Added com.vividsolutions.jts.geom to build to avoid "stub issues"</li> 
  </ul> 
  <h6><a id="user-content-513" class="anchor" href="https://github.com/sksamuel/elastic4s#513" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.1.3</h6> 
  <ul> 
   <li>Added explicit search scroll close in reactive streams #695</li> 
   <li>Added phrase suggestion collate query</li> 
  </ul> 
  <h6><a id="user-content-511" class="anchor" href="https://github.com/sksamuel/elastic4s#511" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.1.1</h6> 
  <ul> 
   <li>Upgrade to elasticsearch 5.1.1</li> 
  </ul> 
  <h6><a id="user-content-504" class="anchor" href="https://github.com/sksamuel/elastic4s#504" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.0.4</h6> 
  <ul> 
   <li>elastic4s-xpack-security module.</li> 
   <li>Added missing geoShapeQuery for indexed shape</li> 
  </ul> 
  <h6><a id="user-content-503" class="anchor" href="https://github.com/sksamuel/elastic4s#503" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.0.3</h6> 
  <ul> 
   <li>Fixed issue with search scroll id using a scala Duration</li> 
  </ul> 
  <h6><a id="user-content-502" class="anchor" href="https://github.com/sksamuel/elastic4s#502" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.0.2</h6> 
  <ul> 
   <li>Elastic4s now brings in the required netty and lucene dependencies that the <code>elasticsearch-transport</code> module needs, but doesn't bring in transitively.</li> 
   <li>Added strongly typed listener to <code>elastic4s-streams</code>.</li> 
  </ul> 
  <h6><a id="user-content-501" class="anchor" href="https://github.com/sksamuel/elastic4s#501" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.0.1</h6> 
  <ul> 
   <li>Released <code>elastic4s-play-json</code> for Elasticsearch 5.</li> 
  </ul> 
  <h6><a id="user-content-500" class="anchor" href="https://github.com/sksamuel/elastic4s#500" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5.0.0</h6> 
  <p>Elasticsearch 5.0 is a huge release from the people at Elastic. There have been some queries and actions removed completely, and plenty of methods have been renamed or changed. The full breaking changes log in Elasticsearch itself is here: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-5.0.html" target="_blank">https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-5.0.html</a></p> 
  <p>These are the majority of changes in the scala client. As part of upgrading, there will certainly be some tweaking required.</p> 
  <ul> 
   <li>TTL has been removed. As a replacement, you should use time based indexes or cron a delete-by-query with a range query on a timestamp field.</li> 
   <li>Scala specific enums have (mostly) been removed in favour of using the Java Enums provided by the Java client.</li> 
   <li>Infix notation has (mostly) been deprecated</li> 
   <li>New typeclass <code>HitReader</code> for reading data from searches. This typeclass handles errors (it returns <code>Either[Throwable, T]</code>) and now works for search, get, multisearch and multiget.</li> 
   <li>PercolatorQuery has been added (Elasticsearch have removed the previous percolator actions)</li> 
   <li>Scala specific re-index has been removed and the elasticsearch re-index action has been added #556</li> 
   <li>Update by query is now a plugin in Elasticsearch and so has been added to the client #616</li> 
   <li>Delete by query is now a plugin in Elasticsearch and so has been added to the client #616</li> 
   <li>Rollover has been added #658</li> 
   <li>Suggestions action has been removed in Elasticsearch, suggestions are now available on the search action</li> 
   <li>Search API has methods for getting the correct suggestion result back, eg <code>resp.termSuggestion("mysugg1")</code></li> 
   <li>Multimatchquery now supports boosting individual fields #545</li> 
   <li>Existing bool syntax has been deprecated in favour of a more explicit syntax #580</li> 
   <li>Terms lookup query has been added #631</li> 
   <li>Terms query now supports Iterables #597 #599</li> 
   <li>New module added for embedded nodes</li> 
   <li><code>successFn</code> has been added to elastic-streams. This is only invoked if there are no errors. #615</li> 
   <li>Cluster health supports parameters #600</li> 
   <li>Added indices options to GetSettings</li> 
   <li>Removed most of the methods deprecated prior to 2.0</li> 
   <li>Create template now supports alias #652</li> 
   <li>Fixed bug in docAsUpsert #651 #592</li> 
   <li>Support predefined Analyzers / Filters #602</li> 
   <li>Support for predefined language-specific stopwords #596</li> 
   <li>Support geo_shape queries #639</li> 
   <li>More like this request has been removed, use more like this query</li> 
   <li>Added better name for update in index into #535</li> 
   <li>Allow querying mappings for all types in an index #619</li> 
   <li>Add shutdown listener to close local node on JVM exit #655</li> 
  </ul> 
  <h6><a id="user-content-211" class="anchor" href="https://github.com/sksamuel/elastic4s#211" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.1.1</h6> 
  <ul> 
   <li>#484 Fixed bug in es-streams throwing ClassCastException</li> 
   <li>#483 Added overloaded doc method to update to accept indexables</li> 
  </ul> 
  <h6><a id="user-content-210" class="anchor" href="https://github.com/sksamuel/elastic4s#210" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.1.0</h6> 
  <ul> 
   <li>Optimize was renamed to ForceMerge. The existing optimize method are deprecated and <code>forceMerge(indexes*)</code> has been added in its place.</li> 
   <li>#395 Added pipeline aggregation definitions</li> 
   <li>#458 Added parameters to clear cache operation</li> 
   <li>#475 Fixed breaking change in terms query</li> 
   <li><code>rewrite</code> was removed from Elasticsearch's matchXXX queries so has been removed in the dsl</li> 
   <li>Added <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-geocentroid-aggregation.html" target="_blank">GeoCentroid</a> aggregation</li> 
   <li>Added <code>terminateAfter</code> to search definition</li> 
   <li>SearchType.SCAN is now deprecated in Elasticsearch</li> 
   <li><code>count</code> is deprecated in Elasticsearch and should be replaced with a search with size 0</li> 
  </ul> 
  <h6><a id="user-content-201" class="anchor" href="https://github.com/sksamuel/elastic4s#201" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.0.1</h6> 
  <ul> 
   <li>#473 Added missing "filter" clause from bool query</li> 
   <li>#475 Fixed breaking change in terms query</li> 
   <li>#474 Added "item" likes to more like this query</li> 
  </ul> 
  <h6><a id="user-content-200" class="anchor" href="https://github.com/sksamuel/elastic4s#200" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.0.0</h6> 
  <p>Major upgrade to Elasticsearch 2.0.0 including breaking changes. <em>Please raise a PR if I've missed any breaking changes.</em></p> 
  <ul> 
   <li>In elasticsearch 2.0.0 one of the major changes has been filters have become queries. So in elastic4s this means all methods <code>xxxFilter</code> are now <code>xxxQuery</code>, eg <code>hasChildrenFilter</code> is now <code>hasChildrenQuery</code>.</li> 
   <li>Some options that existed only on filters like cache and cache key are now removed.</li> 
   <li>Fuzzy like this query has been removed (this was removed in elasticsearch itself)</li> 
   <li>Script dsl has changed. To create a script to pass into a method, you use <code>script(script)</code> or <code>script(name, script)</code> with further parameters set using the builder pattern.</li> 
   <li>DynamicTemplate dsl <code>template name &lt;name&gt;</code> has been removed. Now you supply the full field definition in the dsl method, as such <code>template(field("price_*", DoubleType))</code></li> 
   <li>Index_analyzer has been removed in elasticsearch. Use analyzer and then override the analyzer for search with search_analyzer</li> 
   <li>MoreLikeThis was removed from elasticsearch in favour of a <code>moreLikeThisQuery</code> on a search request.</li> 
   <li><code>moreLikeThisQuery</code> has changed camel case (capital L), also now requires the 'like' text as the 2nd method, eg <code>moreLikeThisQuery("field").text("a")</code> (both can take varargs as well).</li> 
   <li>Search requests now return a richer response type. Previously it returned the java type. The richer type has java style methods so your code will continue to compile, but with deprecation warnings.</li> 
   <li>The sorting DSL has changed in that the previous infix style methods are deprecated. So <code>field sort x</code> becomes <code>fieldSort(x)</code> etc.</li> 
   <li>Or and And filters have been removed completely (not changed into queries like other filters). Use a bool query with <code>must</code> clauses for and's and <code>should</code> clauses for or's.</li> 
   <li>Highlight dsl has changed slightly, <code>highlight field x</code> is now deprecated in favour of <code>highlight(x)</code></li> 
   <li>Delete mapping has been removed (this is removed in elasticsearch itself)</li> 
   <li>IndexStatus api has been removed (this was removed in elasticsearch itself)</li> 
   <li>Template has been renamed dynamic template (to better match the terminology in elasticsesarch)</li> 
   <li>Field and mapping syntax has changed slightly. The implicit <code>"fieldname" as StringType ...</code> has been deprecated in favour of <code>field("fieldname", StringType)</code> or <code>stringField()</code>, <code>longField</code>, etc</li> 
   <li>In es-streams the ResponseListener has changed to accept a <code>BulkItemResult</code> instead of a <code>BulkItemResponse</code></li> 
   <li>Multiget now returns a rich scala wrapper in the form of <code>MultiGetResult</code>. The richer type has java style methods so your code will continue to compile, but with deprecation warnings.</li> 
   <li>GetSegments returns a scala wrapper in the form of <code>GetSegmentsResult</code></li> 
   <li>IndexStats returns a scala wrapper in the form <code>IndexStatsResult</code></li> 
  </ul> 
  <h6><a id="user-content-170" class="anchor" href="https://github.com/sksamuel/elastic4s#170" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.7.0</h6> 
  <ul> 
   <li>Works with Elasticsearch 1.7.x</li> 
   <li>Removed sync client (deprecated since 1.3.0)</li> 
  </ul> 
  <h6><a id="user-content-166" class="anchor" href="https://github.com/sksamuel/elastic4s#166" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.6.6</h6> 
  <ul> 
   <li>Fix for race condition in elastic-streams subscriber</li> 
  </ul> 
  <h6><a id="user-content-165" class="anchor" href="https://github.com/sksamuel/elastic4s#165" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.6.5</h6> 
  <ul> 
   <li>Added sourceAsUpsert to allow <code>Indexable</code> as upsert in update queries</li> 
   <li>Added geohash aggregation</li> 
   <li>Added geohash cell filter</li> 
   <li>Added cluster state api</li> 
   <li>Added support for unmapped_type property</li> 
   <li>Added block until index/type exists testkit helpers</li> 
   <li>Added raw query to count dsl</li> 
   <li>Added <code>show</code> typeclass for count</li> 
   <li>Added <code>InFilter</code> and <code>IndicesFilter</code></li> 
   <li>Added shorter syntax for field types, eg <code>stringField(name)</code> vs <code>field name &lt;name&gt; typed StringType</code></li> 
  </ul> 
  <h6><a id="user-content-164" class="anchor" href="https://github.com/sksamuel/elastic4s#164" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.6.4</h6> 
  <ul> 
   <li>Added reactive streams implementation for elastic4s.</li> 
   <li>Support explicit field types in the update dsl</li> 
   <li>Added missing options to restore snapshot dsl</li> 
   <li>Added <code>show</code> typeclass for percolate register</li> 
  </ul> 
  <h6><a id="user-content-1517" class="anchor" href="https://github.com/sksamuel/elastic4s#1517" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.5.17</h6> 
  <ul> 
   <li>Added clear scroll api</li> 
   <li>Added missing options to restore snapshot dsl</li> 
  </ul> 
  <h6><a id="user-content-163" class="anchor" href="https://github.com/sksamuel/elastic4s#163" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.6.3</h6> 
  <ul> 
   <li>Added clear scroll api</li> 
   <li>Added <code>show</code> typeclass for multisearch</li> 
   <li>Allow update dsl to use explicit field values</li> 
  </ul> 
  <h6><a id="user-content-1516" class="anchor" href="https://github.com/sksamuel/elastic4s#1516" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.5.16</h6> 
  <ul> 
   <li>Added <code>HitAs</code> as a replacement for the <code>Reader</code> typeclass</li> 
   <li>Added indices option to mapping, count and search dsl</li> 
   <li>Added docValuesFormat to timestamp mapping</li> 
  </ul> 
  <h6><a id="user-content-162" class="anchor" href="https://github.com/sksamuel/elastic4s#162" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.6.2</h6> 
  <ul> 
   <li>Added new methods to testkit</li> 
   <li>Introduced simplier syntax for sorts</li> 
   <li>Added <code>HitAs</code> as a replacement for the <code>Reader</code> typeclass</li> 
   <li>Fixed validate query for block queries</li> 
   <li>Added <code>show</code> typeclasses for search, create index, into into, validate, count, and percolate to allow easy debugging of the json of requests.</li> 
  </ul> 
  <h6><a id="user-content-1515" class="anchor" href="https://github.com/sksamuel/elastic4s#1515" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.5.15</h6> 
  <ul> 
   <li>Added <code>matched_fields</code> and highlight filter to highlighter</li> 
  </ul> 
  <h6><a id="user-content-161" class="anchor" href="https://github.com/sksamuel/elastic4s#161" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.6.1</h6> 
  <ul> 
   <li>Added IterableSearch for iterating over a scroll</li> 
   <li>Enhanced multiget dsl to include <code>routing</code>, <code>version</code> and <code>field</code> options</li> 
   <li>Added rich result for GetAliasResponse</li> 
   <li>Added context queries to suggestions</li> 
   <li>Breaking change: Changed syntax of suggestions to be clearer and allow for type safe results</li> 
   <li>Allow setting analyzer by name on matchphraseprefix</li> 
   <li>Added singleMethodSyntax variant, eg <code>indexInto(index)</code> rather than <code>index into index</code></li> 
   <li>Added re-write to validate</li> 
   <li>Added filter support to alias (previously only the java client filters were supported)</li> 
   <li>Added cluster settings api</li> 
   <li>Added field stats api</li> 
   <li>Addd <code>docValuesFormat</code> to timestamp mapping</li> 
   <li>Added <code>matched_fields</code> and highlight filter to highlighter</li> 
   <li>Supported <code>stopwords_list</code> in filter</li> 
   <li>Reworked testkit to allow more configuration over the creating of the test clients</li> 
  </ul> 
  <h2><a id="user-content-used-by" class="anchor" href="https://github.com/sksamuel/elastic4s#used-by" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Used By</h2> 
  <ul> 
   <li>Barclays Bank</li> 
   <li>HSBC</li> 
   <li>Shazaam</li> 
   <li>Graphflow</li> 
   <li>Hotel Urbano</li> 
   <li>Immobilien Scout</li> 
   <li>Deutsche Bank</li> 
   <li>Goldman Sachs</li> 
   <li>HMRC</li> 
   <li>Canal+</li> 
   <li>AOE</li> 
  </ul> 
  <p><em>Raise a PR to add your company here</em></p> 
  <p><a href="https://camo.githubusercontent.com/97fa03cac759a772255b93c64ab1c9f76a103681/68747470733a2f2f7777772e796f75726b69742e636f6d2f696d616765732f796b6c6f676f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/97fa03cac759a772255b93c64ab1c9f76a103681/68747470733a2f2f7777772e796f75726b69742e636f6d2f696d616765732f796b6c6f676f2e706e67" alt="youkit logo" data-canonical-src="https://www.yourkit.com/images/yklogo.png" style="max-width:100%;"></a> YourKit supports open source projects with its full-featured Java Profiler. YourKit, LLC is the creator of <a href="https://www.yourkit.com/java/profiler/index.jsp" target="_blank">YourKit Java Profiler</a> and <a href="https://www.yourkit.com/.net/profiler/index.jsp" target="_blank">YourKit .NET Profiler</a>, innovative and intelligent tools for profiling Java and .NET applications.</p> 
  <h2><a id="user-content-contributions" class="anchor" href="https://github.com/sksamuel/elastic4s#contributions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributions</h2> 
  <p>Contributions to elastic4s are always welcome. Good ways to contribute include:</p> 
  <ul> 
   <li>Raising bugs and feature requests</li> 
   <li>Fixing bugs and enhancing the DSL</li> 
   <li>Improving the performance of elastic4s</li> 
   <li>Adding to the documentation</li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/sksamuel/elastic4s#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <pre><code>This software is licensed under the Apache 2 license, quoted below.

Copyright 2013-2016 Stephen Samuel

Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
</code></pre> 
 </article>
</div>