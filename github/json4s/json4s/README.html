<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-json4s-" class="anchor" href="https://github.com/json4s/json4s#json4s-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JSON4S <a href="https://travis-ci.org/json4s/json4s" target="_blank"><img src="https://camo.githubusercontent.com/949ce492caf082279989f4679c9997be21b0a2b3/68747470733a2f2f7472617669732d63692e6f72672f6a736f6e34732f6a736f6e34732e7376673f6272616e63683d332e36" alt="Build Status" data-canonical-src="https://travis-ci.org/json4s/json4s.svg?branch=3.6" style="max-width:100%;"></a></h1> 
  <p><a href="https://gitter.im/json4s/json4s?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/json4s/json4s" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a></p> 
  <p>At this moment there are at least 6 json libraries for scala, not counting the java json libraries. All these libraries have a very similar AST. This project aims to provide a single AST to be used by other scala json libraries.</p> 
  <p>At this moment the approach taken to working with the AST has been taken from lift-json and the native package is in fact lift-json but outside of the lift project.</p> 
  <h2><a id="user-content-lift-json" class="anchor" href="https://github.com/json4s/json4s#lift-json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Lift JSON</h2> 
  <p>This project also attempts to set lift-json free from the release schedule imposed by the lift framework. The Lift framework carries many dependencies and as such it's typically a blocker for many other scala projects when a new version of scala is released.</p> 
  <p>So the native package in this library is in fact verbatim lift-json in a different package name; this means that your import statements will change if you use this library.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">org.json4s.native.JsonMethods.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>After that everything works exactly the same as it would with lift-json</p> 
  <h2><a id="user-content-jackson" class="anchor" href="https://github.com/json4s/json4s#jackson" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Jackson</h2> 
  <p>In addition to the native parser there is also an implementation that uses jackson for parsing to the AST. The jackson module includes most of the jackson-module-scala functionality and the ability to use it with the lift-json AST.</p> 
  <p>To use jackson instead of the native parser:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.JsonMethods.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>Be aware that the default behavior of the jackson integration is to close the stream when it's done. If you want to change that:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.fasterxml.jackson.databind.</span><span class="pl-v">SerializationFeature</span>
org.json4s.jackson.<span class="pl-en">JsonMethods</span>.mapper.configure(<span class="pl-en">SerializationFeature</span>.<span class="pl-en">CLOSE_CLOSEABLE</span>, <span class="pl-c1">false</span>)</pre>
  </div> 
  <h2><a id="user-content-guide" class="anchor" href="https://github.com/json4s/json4s#guide" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Guide</h2> 
  <p>Parsing and formatting utilities for JSON.</p> 
  <p>A central concept in lift-json library is Json AST which models the structure of a JSON document as a syntax tree.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">sealed</span> <span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">JNothing</span> <span class="pl-k">extends</span> <span class="pl-e">JValue</span> <span class="pl-c"><span class="pl-c">//</span> 'zero' for JValue</span>
<span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">JNull</span> <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JString</span>(<span class="pl-v">s</span>: <span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JDouble</span>(<span class="pl-v">num</span>: <span class="pl-k">Double</span>) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JDecimal</span>(<span class="pl-v">num</span>: <span class="pl-en">BigDecimal</span>) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JInt</span>(<span class="pl-v">num</span>: <span class="pl-en">BigInt</span>) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JLong</span>(<span class="pl-v">num</span>: <span class="pl-k">Long</span>) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JBool</span>(<span class="pl-v">value</span>: <span class="pl-k">Boolean</span>) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JObject</span>(<span class="pl-v">obj</span>: <span class="pl-en">List</span>[<span class="pl-en">JField</span>]) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">JArray</span>(<span class="pl-v">arr</span>: <span class="pl-en">List</span>[<span class="pl-en">JValue</span>]) <span class="pl-k">extends</span> <span class="pl-e">JValue</span>

<span class="pl-k">type</span> <span class="pl-en">JField</span> <span class="pl-k">=</span> (<span class="pl-k">String</span>, <span class="pl-en">JValue</span>)</pre>
  </div> 
  <p>All features are implemented in terms of the above AST. Functions are used to transform the AST itself, or to transform the AST between different formats. Common transformations are summarized in a following picture.</p> 
  <p><a href="https://camo.githubusercontent.com/ae0f0d58b217c2ce1fdc378eb89060a18e97558e/68747470733a2f2f7261772e6769746875622e636f6d2f6a736f6e34732f6a736f6e34732f332e362f636f72652f6a736f6e2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/ae0f0d58b217c2ce1fdc378eb89060a18e97558e/68747470733a2f2f7261772e6769746875622e636f6d2f6a736f6e34732f6a736f6e34732f332e362f636f72652f6a736f6e2e706e67" alt="Json AST" data-canonical-src="https://raw.github.com/json4s/json4s/3.6/core/json.png" style="max-width:100%;"></a></p> 
  <p>Summary of the features:</p> 
  <ul> 
   <li>Fast JSON parser</li> 
   <li>LINQ-style queries</li> 
   <li>Case classes can be used to extract values from parsed JSON</li> 
   <li>Diff &amp; merge</li> 
   <li>DSL to produce valid JSON</li> 
   <li>XPath-like expressions and HOFs to manipulate JSON</li> 
   <li>Pretty and compact printing</li> 
   <li>XML conversions</li> 
   <li>Serialization</li> 
   <li>Low-level pull parser API</li> 
  </ul> 
  <h1><a id="user-content-installation" class="anchor" href="https://github.com/json4s/json4s#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h1> 
  <p>You can add the json4s as a dependency in following ways. Note, replace {latestVersion} with correct Json4s version.</p> 
  <p>You can find available versions here:</p> 
  <p><a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.json4s%22" target="_blank">http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.json4s%22</a></p> 
  <h3><a id="user-content-sbt-users" class="anchor" href="https://github.com/json4s/json4s#sbt-users" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT users</h3> 
  <p>For the native support add the following dependency to your project description:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">json4sNative</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.json4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>json4s-native<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>{latestVersion}<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For the Jackson support add the following dependency to your project description:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">json4sJackson</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.json4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>json4s-jackson<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>{latestVersion}<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-maven-users" class="anchor" href="https://github.com/json4s/json4s#maven-users" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maven users</h3> 
  <p>For the native support add the following dependency to your pom:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;org.json4s&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;json4s-native_${scala.version}&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;{latestVersion}&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>For the jackson support add the following dependency to your pom:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;org.json4s&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;json4s-jackson_${scala.version}&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;{latestVersion}&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h2><a id="user-content-extras" class="anchor" href="https://github.com/json4s/json4s#extras" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Extras</h2> 
  <ul> 
   <li><a href="https://github.com/json4s/json4s/tree/3.6/ext" target="_blank">ext</a></li> 
  </ul> 
  <p>Support for Enum, Joda-Time, ...</p> 
  <ul> 
   <li><a href="https://github.com/json4s/json4s/tree/3.6/scalaz" target="_blank">scalaz</a></li> 
  </ul> 
  <p>Applicative style parsing with Scalaz</p> 
  <h1><a id="user-content-migration-from-older-versions" class="anchor" href="https://github.com/json4s/json4s#migration-from-older-versions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Migration from older versions</h1> 
  <h2><a id="user-content-330--" class="anchor" href="https://github.com/json4s/json4s#330--" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3.3.0 -&gt;</h2> 
  <p>json4s 3.3 basically should be source code compatible with 3.2.x. Since json4s 3.3.0, We've started using <a href="https://github.com/typesafehub/migration-manager" target="_blank">MiMa</a> for binary compatibility verification not to repeat the bin compatibility issue described <a href="https://github.com/json4s/json4s/issues/225" target="_blank">here</a>.</p> 
  <p>The behavior of <code>.toOption</code> on JValue has changed. Now both <code>JNothing</code> and <code>JNull</code> return None. For the old behavior you can use <code>toSome</code> which will only turn a <code>JNothing</code> into a None.</p> 
  <p>All the merged pull requests: <a href="https://github.com/json4s/json4s/pulls?q=is%3Apr+is%3Aclosed+milestone%3A3.3" target="_blank">https://github.com/json4s/json4s/pulls?q=is%3Apr+is%3Aclosed+milestone%3A3.3</a></p> 
  <h2><a id="user-content-300--" class="anchor" href="https://github.com/json4s/json4s#300--" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3.0.0 -&gt;</h2> 
  <p>JField is no longer a JValue. This means more type safety since it is no longer possible to create invalid JSON where JFields are added directly into JArrays for instance. The most noticeable consequence of this change are that map, transform, find and filter come in two versions:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">map</span>(<span class="pl-v">f</span>: <span class="pl-en">JValue</span> <span class="pl-k">=&gt;</span> <span class="pl-en">JValue</span>)<span class="pl-k">:</span> <span class="pl-en">JValue</span>
<span class="pl-k">def</span> <span class="pl-en">mapField</span>(<span class="pl-v">f</span>: <span class="pl-en">JField</span> <span class="pl-k">=&gt;</span> <span class="pl-en">JField</span>)<span class="pl-k">:</span> <span class="pl-en">JValue</span>
<span class="pl-k">def</span> <span class="pl-en">transform</span>(<span class="pl-v">f</span>: <span class="pl-en">PartialFunction</span>[<span class="pl-en">JValue</span>, <span class="pl-en">JValue</span>])<span class="pl-k">:</span> <span class="pl-en">JValue</span>
<span class="pl-k">def</span> <span class="pl-en">transformField</span>(<span class="pl-v">f</span>: <span class="pl-en">PartialFunction</span>[<span class="pl-en">JField</span>, <span class="pl-en">JField</span>])<span class="pl-k">:</span> <span class="pl-en">JValue</span>
<span class="pl-k">def</span> <span class="pl-en">find</span>(<span class="pl-v">p</span>: <span class="pl-en">JValue</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Boolean</span>)<span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">JValue</span>]
<span class="pl-k">def</span> <span class="pl-en">findField</span>(<span class="pl-v">p</span>: <span class="pl-en">JField</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Boolean</span>)<span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">JField</span>]
<span class="pl-c"><span class="pl-c">//</span>...</span></pre>
  </div> 
  <p>Use *Field functions to traverse fields in the JSON, and use the functions without 'Field' in the name to traverse values in the JSON.</p> 
  <h2><a id="user-content-22--" class="anchor" href="https://github.com/json4s/json4s#22--" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.2 -&gt;</h2> 
  <p>Path expressions were changed after version 2.2. Previous versions returned JField, which unnecessarily complicated the use of the expressions. If you have used path expressions with pattern matching like:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(x)) <span class="pl-k">=</span> json \ <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>it is now required to change that to:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">JInt</span>(x) <span class="pl-k">=</span> json \ <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span></pre>
  </div> 
  <h1><a id="user-content-parsing-json" class="anchor" href="https://github.com/json4s/json4s#parsing-json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Parsing JSON</h1> 
  <p>Any valid json can be parsed into internal AST format. For native support:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.native.JsonMethods.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> parse(<span class="pl-s"><span class="pl-pds">"""</span> { "numbers" : [1, 2, 3, 4] } <span class="pl-pds">"""</span></span>)
res0<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span>
      <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((numbers,<span class="pl-en">JArray</span>(<span class="pl-en">List</span>(<span class="pl-en">JInt</span>(<span class="pl-c1">1</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">2</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">3</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">4</span>))))))

scala<span class="pl-k">&gt;</span> parse(<span class="pl-s"><span class="pl-pds">"""</span>{"name":"Toy","price":35.35}<span class="pl-pds">"""</span></span>, useBigDecimalForDouble <span class="pl-k">=</span> <span class="pl-c1">true</span>)
res1<span class="pl-k">:</span> org.json4s.package.<span class="pl-en">JValue</span> <span class="pl-k">=</span> 
      <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((name,<span class="pl-en">JString</span>(<span class="pl-en">Toy</span>)), (price,<span class="pl-en">JDecimal</span>(<span class="pl-c1">35.35</span>))))</pre>
  </div> 
  <p>For jackson support:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.JsonMethods.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> parse(<span class="pl-s"><span class="pl-pds">"""</span> { "numbers" : [1, 2, 3, 4] } <span class="pl-pds">"""</span></span>)
res0<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span>
      <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((numbers,<span class="pl-en">JArray</span>(<span class="pl-en">List</span>(<span class="pl-en">JInt</span>(<span class="pl-c1">1</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">2</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">3</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">4</span>))))))

scala<span class="pl-k">&gt;</span> parse(<span class="pl-s"><span class="pl-pds">"""</span>{"name":"Toy","price":35.35}<span class="pl-pds">"""</span></span>, useBigDecimalForDouble <span class="pl-k">=</span> <span class="pl-c1">true</span>)
res1<span class="pl-k">:</span> org.json4s.package.<span class="pl-en">JValue</span> <span class="pl-k">=</span> 
      <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((name,<span class="pl-en">JString</span>(<span class="pl-en">Toy</span>)), (price,<span class="pl-en">JDecimal</span>(<span class="pl-c1">35.35</span>))))</pre>
  </div> 
  <h1><a id="user-content-producing-json" class="anchor" href="https://github.com/json4s/json4s#producing-json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Producing JSON</h1> 
  <p>You can generate json in 2 modes: either in <code>DoubleMode</code> or in <code>BigDecimalMode</code>; the former will map all decimal values into JDoubles, and the latter into JDecimals.</p> 
  <p>For the double mode dsl use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.json4s.JsonDSL.</span><span class="pl-v">_</span>
<span class="pl-c"><span class="pl-c">//</span> or</span>
<span class="pl-k">import</span> <span class="pl-v">org.json4s.JsonDSL.WithDouble.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>For the big decimal mode dsl use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.json4s.JsonDSL.WithBigDecimal.</span><span class="pl-v">_</span></pre>
  </div> 
  <h2><a id="user-content-dsl-rules" class="anchor" href="https://github.com/json4s/json4s#dsl-rules" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>DSL rules</h2> 
  <ul> 
   <li>Primitive types map to JSON primitives.</li> 
   <li>Any seq produces JSON array.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)

scala<span class="pl-k">&gt;</span> compact(render(json))
res0<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>]</pre>
  </div> 
  <ul> 
   <li>Tuple2[String, A] produces field.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>)

scala<span class="pl-k">&gt;</span> compact(render(json))
res1<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <ul> 
   <li>~ operator produces object by combining fields.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>) <span class="pl-k">~</span> (<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">35</span>)

scala<span class="pl-k">&gt;</span> compact(render(json))
res2<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">35</span>}</pre>
  </div> 
  <ul> 
   <li>Any value can be optional. The field and value are completely removed when it doesn't have a value.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>) <span class="pl-k">~</span> (<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Some</span>(<span class="pl-c1">35</span>))

scala<span class="pl-k">&gt;</span> compact(render(json))
res3<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">35</span>}

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>) <span class="pl-k">~</span> (<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> (<span class="pl-c1">None</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">Int</span>]))

scala<span class="pl-k">&gt;</span> compact(render(json))
res4<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <ul> 
   <li>Extending the dsl</li> 
  </ul> 
  <p>To extend the dsl with your own classes you must have an implicit conversion in scope of signature:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">type</span> <span class="pl-en">DslConversion</span> <span class="pl-k">=</span> <span class="pl-en">T</span> <span class="pl-k">=&gt;</span> <span class="pl-en">JValue</span></pre>
  </div> 
  <h2><a id="user-content-example" class="anchor" href="https://github.com/json4s/json4s#example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">JsonExample</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {
  <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
  <span class="pl-k">import</span> <span class="pl-v">org.json4s.JsonDSL.</span><span class="pl-v">_</span>
  <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.JsonMethods.</span><span class="pl-v">_</span>

  <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Winner</span>(<span class="pl-v">id</span>: <span class="pl-k">Long</span>, <span class="pl-v">numbers</span>: <span class="pl-en">List</span>[<span class="pl-k">Int</span>])
  <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Lotto</span>(<span class="pl-v">id</span>: <span class="pl-k">Long</span>, <span class="pl-v">winningNumbers</span>: <span class="pl-en">List</span>[<span class="pl-k">Int</span>], <span class="pl-v">winners</span>: <span class="pl-en">List</span>[<span class="pl-en">Winner</span>], <span class="pl-v">drawDate</span>: <span class="pl-en">Option</span>[java.util.<span class="pl-en">Date</span>])

  <span class="pl-k">val</span> <span class="pl-en">winners</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-en">Winner</span>(<span class="pl-c1">23</span>, <span class="pl-en">List</span>(<span class="pl-c1">2</span>, <span class="pl-c1">45</span>, <span class="pl-c1">34</span>, <span class="pl-c1">23</span>, <span class="pl-c1">3</span>, <span class="pl-c1">5</span>)), <span class="pl-en">Winner</span>(<span class="pl-c1">54</span>, <span class="pl-en">List</span>(<span class="pl-c1">52</span>, <span class="pl-c1">3</span>, <span class="pl-c1">12</span>, <span class="pl-c1">11</span>, <span class="pl-c1">18</span>, <span class="pl-c1">22</span>)))
  <span class="pl-k">val</span> <span class="pl-en">lotto</span> <span class="pl-k">=</span> <span class="pl-en">Lotto</span>(<span class="pl-c1">5</span>, <span class="pl-en">List</span>(<span class="pl-c1">2</span>, <span class="pl-c1">45</span>, <span class="pl-c1">34</span>, <span class="pl-c1">23</span>, <span class="pl-c1">7</span>, <span class="pl-c1">5</span>, <span class="pl-c1">3</span>), winners, <span class="pl-c1">None</span>)

  <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span>
    (<span class="pl-s"><span class="pl-pds">"</span>lotto<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span>
      (<span class="pl-s"><span class="pl-pds">"</span>lotto-id<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> lotto.id) <span class="pl-k">~</span>
      (<span class="pl-s"><span class="pl-pds">"</span>winning-numbers<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> lotto.winningNumbers) <span class="pl-k">~</span>
      (<span class="pl-s"><span class="pl-pds">"</span>draw-date<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> lotto.drawDate.map(_.toString)) <span class="pl-k">~</span>
      (<span class="pl-s"><span class="pl-pds">"</span>winners<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span>
        lotto.winners.map { w <span class="pl-k">=&gt;</span>
          ((<span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> w.id) <span class="pl-k">~</span>
           (<span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> w.numbers))}))

  println(compact(render(json)))
}</pre>
  </div> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-en">JsonExample</span>
{<span class="pl-s"><span class="pl-pds">"</span>lotto<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>lotto-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">5</span>,<span class="pl-s"><span class="pl-pds">"</span>winning-numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">2</span>,<span class="pl-c1">45</span>,<span class="pl-c1">34</span>,<span class="pl-c1">23</span>,<span class="pl-c1">7</span>,<span class="pl-c1">5</span>,<span class="pl-c1">3</span>],<span class="pl-s"><span class="pl-pds">"</span>winners<span class="pl-pds">"</span></span><span class="pl-k">:</span>
[{<span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">23</span>,<span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">2</span>,<span class="pl-c1">45</span>,<span class="pl-c1">34</span>,<span class="pl-c1">23</span>,<span class="pl-c1">3</span>,<span class="pl-c1">5</span>]},{<span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">54</span>,<span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">52</span>,<span class="pl-c1">3</span>,<span class="pl-c1">12</span>,<span class="pl-c1">11</span>,<span class="pl-c1">18</span>,<span class="pl-c1">22</span>]}]}}</pre>
  </div> 
  <p>The above example produces the following pretty-printed JSON. Notice that draw-date field is not rendered since its value is None:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> pretty(render(<span class="pl-en">JsonExample</span>.json))

{
  <span class="pl-s"><span class="pl-pds">"</span>lotto<span class="pl-pds">"</span></span><span class="pl-k">:</span>{
    <span class="pl-s"><span class="pl-pds">"</span>lotto-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">5</span>,
    <span class="pl-s"><span class="pl-pds">"</span>winning-numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">2</span>,<span class="pl-c1">45</span>,<span class="pl-c1">34</span>,<span class="pl-c1">23</span>,<span class="pl-c1">7</span>,<span class="pl-c1">5</span>,<span class="pl-c1">3</span>],
    <span class="pl-s"><span class="pl-pds">"</span>winners<span class="pl-pds">"</span></span><span class="pl-k">:</span>[{
      <span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">23</span>,
      <span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">2</span>,<span class="pl-c1">45</span>,<span class="pl-c1">34</span>,<span class="pl-c1">23</span>,<span class="pl-c1">3</span>,<span class="pl-c1">5</span>]
    },{
      <span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">54</span>,
      <span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">52</span>,<span class="pl-c1">3</span>,<span class="pl-c1">12</span>,<span class="pl-c1">11</span>,<span class="pl-c1">18</span>,<span class="pl-c1">22</span>]
    }]
  }
}</pre>
  </div> 
  <h2><a id="user-content-merging--diffing" class="anchor" href="https://github.com/json4s/json4s#merging--diffing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Merging &amp; Diffing</h2> 
  <p>Two JSONs can be merged and diffed with each other. Please see more examples in <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/MergeExamples.scala" target="_blank">MergeExamples.scala</a> and <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/DiffExamples.scala" target="_blank">DiffExamples.scala</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.JsonMethods.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">lotto1</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span>{</span>
<span class="pl-s">         "lotto":{</span>
<span class="pl-s">           "lotto-id":5,</span>
<span class="pl-s">           "winning-numbers":[2,45,34,23,7,5,3],</span>
<span class="pl-s">           "winners":[{</span>
<span class="pl-s">             "winner-id":23,</span>
<span class="pl-s">             "numbers":[2,45,34,23,3,5]</span>
<span class="pl-s">           }]</span>
<span class="pl-s">         }</span>
<span class="pl-s">       }<span class="pl-pds">"""</span></span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">lotto2</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span>{</span>
<span class="pl-s">         "lotto":{</span>
<span class="pl-s">           "winners":[{</span>
<span class="pl-s">             "winner-id":54,</span>
<span class="pl-s">             "numbers":[52,3,12,11,18,22]</span>
<span class="pl-s">           }]</span>
<span class="pl-s">         }</span>
<span class="pl-s">       }<span class="pl-pds">"""</span></span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">mergedLotto</span> <span class="pl-k">=</span> lotto1 merge lotto2

scala<span class="pl-k">&gt;</span> pretty(render(mergedLotto))
res0<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span>
{
  <span class="pl-s"><span class="pl-pds">"</span>lotto<span class="pl-pds">"</span></span><span class="pl-k">:</span>{
    <span class="pl-s"><span class="pl-pds">"</span>lotto-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">5</span>,
    <span class="pl-s"><span class="pl-pds">"</span>winning-numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">2</span>,<span class="pl-c1">45</span>,<span class="pl-c1">34</span>,<span class="pl-c1">23</span>,<span class="pl-c1">7</span>,<span class="pl-c1">5</span>,<span class="pl-c1">3</span>],
    <span class="pl-s"><span class="pl-pds">"</span>winners<span class="pl-pds">"</span></span><span class="pl-k">:</span>[{
      <span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">23</span>,
      <span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">2</span>,<span class="pl-c1">45</span>,<span class="pl-c1">34</span>,<span class="pl-c1">23</span>,<span class="pl-c1">3</span>,<span class="pl-c1">5</span>]
    },{
      <span class="pl-s"><span class="pl-pds">"</span>winner-id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">54</span>,
      <span class="pl-s"><span class="pl-pds">"</span>numbers<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">52</span>,<span class="pl-c1">3</span>,<span class="pl-c1">12</span>,<span class="pl-c1">11</span>,<span class="pl-c1">18</span>,<span class="pl-c1">22</span>]
    }]
  }
}

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">Diff</span>(changed, added, deleted) <span class="pl-k">=</span> mergedLotto diff lotto1
changed<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JNothing</span>
added<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JNothing</span>
deleted<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((lotto,<span class="pl-en">JObject</span>(<span class="pl-en">List</span>(<span class="pl-en">JField</span>(winners,
<span class="pl-en">JArray</span>(<span class="pl-en">List</span>(<span class="pl-en">JObject</span>(<span class="pl-en">List</span>((winner<span class="pl-k">-</span>id,<span class="pl-en">JInt</span>(<span class="pl-c1">54</span>)), (numbers,<span class="pl-en">JArray</span>(
<span class="pl-en">List</span>(<span class="pl-en">JInt</span>(<span class="pl-c1">52</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">3</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">12</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">11</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">18</span>), <span class="pl-en">JInt</span>(<span class="pl-c1">22</span>))))))))))))))</pre>
  </div> 
  <h1><a id="user-content-querying-json" class="anchor" href="https://github.com/json4s/json4s#querying-json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Querying JSON</h1> 
  <h2><a id="user-content-linq-style" class="anchor" href="https://github.com/json4s/json4s#linq-style" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>"LINQ" style</h2> 
  <p>JSON values can be extracted using for-comprehensions. Please see more examples in <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/JsonQueryExamples.scala" target="_blank">JsonQueryExamples.scala</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.native.JsonMethods.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">         { "name": "joe",</span>
<span class="pl-s">           "children": [</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "name": "Mary",</span>
<span class="pl-s">               "age": 5</span>
<span class="pl-s">             },</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "name": "Mazy",</span>
<span class="pl-s">               "age": 3</span>
<span class="pl-s">             }</span>
<span class="pl-s">           ]</span>
<span class="pl-s">         }</span>
<span class="pl-s">       <span class="pl-pds">"""</span></span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">for</span> {
         <span class="pl-en">JObject</span>(child) <span class="pl-k">&lt;</span><span class="pl-k">-</span> json
         <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(age))  <span class="pl-k">&lt;</span><span class="pl-k">-</span> child
       } <span class="pl-k">yield</span> age
res0<span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">BigInt</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">5</span>, <span class="pl-c1">3</span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">for</span> {
         <span class="pl-en">JObject</span>(child) <span class="pl-k">&lt;</span><span class="pl-k">-</span> json
         <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-en">JString</span>(name)) <span class="pl-k">&lt;</span><span class="pl-k">-</span> child
         <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(age)) <span class="pl-k">&lt;</span><span class="pl-k">-</span> child
         <span class="pl-k">if</span> age <span class="pl-k">&gt;</span> <span class="pl-c1">4</span>
       } <span class="pl-k">yield</span> (name, age)
res1<span class="pl-k">:</span> <span class="pl-en">List</span>[(<span class="pl-k">String</span>, <span class="pl-en">BigInt</span>)] <span class="pl-k">=</span> <span class="pl-en">List</span>((<span class="pl-en">Mary</span>,<span class="pl-c1">5</span>))</pre>
  </div> 
  <h2><a id="user-content-xpath--hofs" class="anchor" href="https://github.com/json4s/json4s#xpath--hofs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>XPath + HOFs</h2> 
  <p>The json AST can be queried using XPath-like functions. The following REPL session shows the usage of '\', '\\', 'find', 'filter', 'transform', 'remove' and 'values' functions.</p> 
  <p>The example json is:</p> 
  <div class="highlight highlight-source-js">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Joe<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">35</span>,
    <span class="pl-s"><span class="pl-pds">"</span>spouse<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
      <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Marilyn<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">33</span>
      }
    }
  }
}</pre>
  </div> 
  <p>Translated to DSL syntax:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.native.JsonMethods.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>or</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.JsonMethods.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.JsonDSL.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span><span class="pl-k">:</span> <span class="pl-en">JObject</span> <span class="pl-k">=</span>
  (<span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span>
    (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>Joe<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>
    (<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">35</span>) <span class="pl-k">~</span>
    (<span class="pl-s"><span class="pl-pds">"</span>spouse<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span>
      (<span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span>
        (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>Marilyn<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>
        (<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">33</span>)
      )
    )
  )

scala<span class="pl-k">&gt;</span> json \\ <span class="pl-s"><span class="pl-pds">"</span>spouse<span class="pl-pds">"</span></span>
res0<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JObject</span>(<span class="pl-en">List</span>(
      (person,<span class="pl-en">JObject</span>(<span class="pl-en">List</span>((name,<span class="pl-en">JString</span>(<span class="pl-en">Marilyn</span>)), (age,<span class="pl-en">JInt</span>(<span class="pl-c1">33</span>)))))))

scala<span class="pl-k">&gt;</span> compact(render(res0))
res1<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Marilyn<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">33</span>}}

scala<span class="pl-k">&gt;</span> compact(render(json \\ <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>))
res2<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Joe<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Marilyn<span class="pl-pds">"</span></span>}

scala<span class="pl-k">&gt;</span> compact(render((json removeField { _ <span class="pl-k">==</span> <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-en">JString</span>(<span class="pl-s"><span class="pl-pds">"</span>Marilyn<span class="pl-pds">"</span></span>)) }) \\ <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>))
res3<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Joe<span class="pl-pds">"</span></span>

scala<span class="pl-k">&gt;</span> compact(render(json \ <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>))
res4<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Joe<span class="pl-pds">"</span></span>

scala<span class="pl-k">&gt;</span> compact(render(json \ <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>spouse<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>))
res5<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Marilyn<span class="pl-pds">"</span></span>

scala<span class="pl-k">&gt;</span> json findField {
         <span class="pl-k">case</span> <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, _) <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span>
         <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span>
       }
res6<span class="pl-k">:</span> <span class="pl-en">Option</span>[org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span>] <span class="pl-k">=</span> <span class="pl-en">Some</span>((name,<span class="pl-en">JString</span>(<span class="pl-en">Joe</span>)))

scala<span class="pl-k">&gt;</span> json filterField {
         <span class="pl-k">case</span> <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, _) <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span>
         <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span>
       }
res7<span class="pl-k">:</span> <span class="pl-en">List</span>[org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JField</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-en">JField</span>(name,<span class="pl-en">JString</span>(<span class="pl-en">Joe</span>)), <span class="pl-en">JField</span>(name,<span class="pl-en">JString</span>(<span class="pl-en">Marilyn</span>)))

scala<span class="pl-k">&gt;</span> json transformField {
         <span class="pl-k">case</span> <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-en">JString</span>(s)) <span class="pl-k">=&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>NAME<span class="pl-pds">"</span></span>, <span class="pl-en">JString</span>(s.toUpperCase))
       }
res8<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((person,<span class="pl-en">JObject</span>(<span class="pl-en">List</span>(
(<span class="pl-en">NAME</span>,<span class="pl-en">JString</span>(<span class="pl-en">JOE</span>)), (age,<span class="pl-en">JInt</span>(<span class="pl-c1">35</span>)), (spouse,<span class="pl-en">JObject</span>(<span class="pl-en">List</span>(
(person,<span class="pl-en">JObject</span>(<span class="pl-en">List</span>((<span class="pl-en">NAME</span>,<span class="pl-en">JString</span>(<span class="pl-en">MARILYN</span>)), (age,<span class="pl-en">JInt</span>(<span class="pl-c1">33</span>)))))))))))))

scala<span class="pl-k">&gt;</span> json.values
res8<span class="pl-k">:</span> scala.collection.immutable.<span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-en">Any</span>] <span class="pl-k">=</span> <span class="pl-en">Map</span>(person <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(name <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Joe</span>, age <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">35</span>, spouse <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(person <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(name <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Marilyn</span>, age <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">33</span>))))</pre>
  </div> 
  <p>Indexed path expressions work too and values can be unboxed using type expressions:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">         { "name": "joe",</span>
<span class="pl-s">           "children": [</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "name": "Mary",</span>
<span class="pl-s">               "age": 5</span>
<span class="pl-s">             },</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "name": "Mazy",</span>
<span class="pl-s">               "age": 3</span>
<span class="pl-s">             }</span>
<span class="pl-s">           ]</span>
<span class="pl-s">         }</span>
<span class="pl-s">       <span class="pl-pds">"""</span></span>)

scala<span class="pl-k">&gt;</span> (json \ <span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span>)(<span class="pl-c1">0</span>)
res0<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JObject</span>(<span class="pl-en">List</span>((name,<span class="pl-en">JString</span>(<span class="pl-en">Mary</span>)), (age,<span class="pl-en">JInt</span>(<span class="pl-c1">5</span>))))

scala<span class="pl-k">&gt;</span> (json \ <span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span>)(<span class="pl-c1">1</span>) \ <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>
res1<span class="pl-k">:</span> org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JValue</span> <span class="pl-k">=</span> <span class="pl-en">JString</span>(<span class="pl-en">Mazy</span>)

scala<span class="pl-k">&gt;</span> json \\ <span class="pl-c1">classOf</span>[<span class="pl-en">JInt</span>]
res2<span class="pl-k">:</span> <span class="pl-en">List</span>[org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JInt</span>#<span class="pl-en">Values</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">5</span>, <span class="pl-c1">3</span>)

scala<span class="pl-k">&gt;</span> json \ <span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span> \\ <span class="pl-c1">classOf</span>[<span class="pl-en">JString</span>]
res3<span class="pl-k">:</span> <span class="pl-en">List</span>[org.json4s.<span class="pl-en">JsonAST</span>.<span class="pl-en">JString</span>#<span class="pl-en">Values</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-en">Mary</span>, <span class="pl-en">Mazy</span>)</pre>
  </div> 
  <h1><a id="user-content-extracting-values" class="anchor" href="https://github.com/json4s/json4s#extracting-values" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Extracting values</h1> 
  <p>Case classes can be used to extract values from parsed JSON. Non-existent values can be extracted into scala.Option and strings can be automatically converted into java.util.Dates.</p> 
  <p>Please see more examples in <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/ExtractionExamplesSpec.scala" target="_blank">ExtractionExampleSpec.scala</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.JsonMethods.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">DefaultFormats</span> <span class="pl-c"><span class="pl-c">//</span> Brings in default date formats etc.</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Child</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">age</span>: <span class="pl-k">Int</span>, <span class="pl-v">birthdate</span>: <span class="pl-en">Option</span>[java.util.<span class="pl-en">Date</span>])
scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Address</span>(<span class="pl-v">street</span>: <span class="pl-k">String</span>, <span class="pl-v">city</span>: <span class="pl-k">String</span>)
scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">address</span>: <span class="pl-en">Address</span>, <span class="pl-v">children</span>: <span class="pl-en">List</span>[<span class="pl-en">Child</span>])

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">         { "name": "joe",</span>
<span class="pl-s">           "address": {</span>
<span class="pl-s">             "street": "Bulevard",</span>
<span class="pl-s">             "city": "Helsinki"</span>
<span class="pl-s">           },</span>
<span class="pl-s">           "children": [</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "name": "Mary",</span>
<span class="pl-s">               "age": 5,</span>
<span class="pl-s">               "birthdate": "2004-09-04T18:06:22Z"</span>
<span class="pl-s">             },</span>
<span class="pl-s">             {</span>
<span class="pl-s">               "name": "Mazy",</span>
<span class="pl-s">               "age": 3</span>
<span class="pl-s">             }</span>
<span class="pl-s">           ]</span>
<span class="pl-s">         }</span>
<span class="pl-s">       <span class="pl-pds">"""</span></span>)

scala<span class="pl-k">&gt;</span> json.extract[<span class="pl-en">Person</span>]
res0<span class="pl-k">:</span> <span class="pl-en">Person</span> <span class="pl-k">=</span> <span class="pl-en">Person</span>(joe,<span class="pl-en">Address</span>(<span class="pl-en">Bulevard</span>,<span class="pl-en">Helsinki</span>),<span class="pl-en">List</span>(<span class="pl-en">Child</span>(<span class="pl-en">Mary</span>,<span class="pl-c1">5</span>,<span class="pl-en">Some</span>(<span class="pl-en">Sat</span> <span class="pl-en">Sep</span> <span class="pl-c1">04</span> <span class="pl-c1">18</span><span class="pl-k">:</span><span class="pl-c1">06</span><span class="pl-k">:</span><span class="pl-c1">22</span> <span class="pl-en">EEST</span> <span class="pl-c1">2004</span>)), <span class="pl-en">Child</span>(<span class="pl-en">Mazy</span>,<span class="pl-c1">3</span>,<span class="pl-c1">None</span>)))

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">addressJson</span> <span class="pl-k">=</span> json  \ <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>  <span class="pl-c"><span class="pl-c">//</span> Extract address object</span>
scala<span class="pl-k">&gt;</span> addressJson.extract[<span class="pl-en">Address</span>]
res1<span class="pl-k">:</span> <span class="pl-en">Address</span> <span class="pl-k">=</span> <span class="pl-en">Address</span>(<span class="pl-en">Bulevard</span>,<span class="pl-en">Helsinki</span>)

scala<span class="pl-k">&gt;</span> (json \ <span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span>).extract[<span class="pl-en">List</span>[<span class="pl-en">Child</span>]]  <span class="pl-c"><span class="pl-c">//</span> Extract list of objects</span>
res2<span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">Child</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-en">Child</span>(<span class="pl-en">Mary</span>,<span class="pl-c1">5</span>,<span class="pl-en">Some</span>(<span class="pl-en">Sat</span> <span class="pl-en">Sep</span> <span class="pl-c1">04</span> <span class="pl-c1">23</span><span class="pl-k">:</span><span class="pl-c1">36</span><span class="pl-k">:</span><span class="pl-c1">22</span> <span class="pl-en">IST</span> <span class="pl-c1">2004</span>)), <span class="pl-en">Child</span>(<span class="pl-en">Mazy</span>,<span class="pl-c1">3</span>,<span class="pl-c1">None</span>))</pre>
  </div> 
  <p>By default the constructor parameter names must match json field names. However, sometimes json field names contain characters which are not allowed characters in Scala identifiers. There are two solutions for this. (See <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/LottoExample.scala" target="_blank">LottoExample.scala</a> for a bigger example.)</p> 
  <p>Use back ticks:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>(<span class="pl-v">`first-name`</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <p>Use transform function to postprocess AST:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>(<span class="pl-v">firstname</span>: <span class="pl-k">String</span>)
scala<span class="pl-k">&gt;</span> json transformField {
         <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>first-name<span class="pl-pds">"</span></span>, x) <span class="pl-k">=&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>firstname<span class="pl-pds">"</span></span>, x)
       }</pre>
  </div> 
  <p>If the json field names are snake case (i.e., separated_by_underscores), but the case class uses camel case (i.e., firstLetterLowercaseAndNextWordsCapitalized), you can convert the keys during the extraction using <code>camelizeKeys</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.native.JsonMethods.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">DefaultFormats</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span>{"first_name":"Mary"}<span class="pl-pds">"""</span></span>)
scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>(<span class="pl-v">firstName</span>: <span class="pl-k">String</span>)

scala<span class="pl-k">&gt;</span> json.camelizeKeys.extract[<span class="pl-en">Person</span>]
res0<span class="pl-k">:</span> <span class="pl-en">Person</span> <span class="pl-k">=</span> <span class="pl-en">Person</span>(<span class="pl-en">Mazy</span>)</pre>
  </div> 
  <p>See the "Serialization" section below for details on converting a class with camel-case fields into json with snake case keys.</p> 
  <p>The extraction function tries to find the best-matching constructor when the case class has auxiliary constructors. For instance, extracting from JSON {"price":350} into the following case class will use the auxiliary constructor instead of the primary constructor:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Bike</span>(<span class="pl-v">make</span>: <span class="pl-k">String</span>, <span class="pl-v">price</span>: <span class="pl-k">Int</span>) {
         <span class="pl-k">def</span> <span class="pl-en">this</span>(<span class="pl-v">price</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> <span class="pl-c1">this</span>(<span class="pl-s"><span class="pl-pds">"</span>Trek<span class="pl-pds">"</span></span>, price)
       }
scala<span class="pl-k">&gt;</span> parse(<span class="pl-s"><span class="pl-pds">"""</span> {"price":350} <span class="pl-pds">"""</span></span>).extract[<span class="pl-en">Bike</span>]
res0<span class="pl-k">:</span> <span class="pl-en">Bike</span> <span class="pl-k">=</span> <span class="pl-en">Bike</span>(<span class="pl-en">Trek</span>,<span class="pl-c1">350</span>)</pre>
  </div> 
  <p>Primitive values can be extracted from JSON primitives or fields:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> (json \ <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>).extract[<span class="pl-k">String</span>]
res0<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>

scala<span class="pl-k">&gt;</span> ((json \ <span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span>)(<span class="pl-c1">0</span>) \ <span class="pl-s"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span>).extract[<span class="pl-en">Date</span>]
res1<span class="pl-k">:</span> java.util.<span class="pl-en">Date</span> <span class="pl-k">=</span> <span class="pl-en">Sat</span> <span class="pl-en">Sep</span> <span class="pl-c1">04</span> <span class="pl-c1">21</span><span class="pl-k">:</span><span class="pl-c1">06</span><span class="pl-k">:</span><span class="pl-c1">22</span> <span class="pl-en">EEST</span> <span class="pl-c1">2004</span></pre>
  </div> 
  <p>DateFormat can be changed by overriding 'DefaultFormats' (or by implementing trait 'Formats'):</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DefaultFormats</span> {
         <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">dateFormatter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SimpleDateFormat</span>(<span class="pl-s"><span class="pl-pds">"</span>yyyy-MM-dd'T'HH:mm:ss.SSS'Z'<span class="pl-pds">"</span></span>)
       }</pre>
  </div> 
  <p>A JSON object can be extracted to Map[String, _] too. Each field becomes a key value pair in result Map:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">         {</span>
<span class="pl-s">           "name": "joe",</span>
<span class="pl-s">           "addresses": {</span>
<span class="pl-s">             "address1": {</span>
<span class="pl-s">               "street": "Bulevard",</span>
<span class="pl-s">               "city": "Helsinki"</span>
<span class="pl-s">             },</span>
<span class="pl-s">             "address2": {</span>
<span class="pl-s">               "street": "Soho",</span>
<span class="pl-s">               "city": "London"</span>
<span class="pl-s">             }</span>
<span class="pl-s">           }</span>
<span class="pl-s">         }<span class="pl-pds">"""</span></span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PersonWithAddresses</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">addresses</span>: <span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">Address</span>])
scala<span class="pl-k">&gt;</span> json.extract[<span class="pl-en">PersonWithAddresses</span>]
res0<span class="pl-k">:</span> <span class="pl-en">PersonWithAddresses</span>(<span class="pl-s"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>, <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>address1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Address</span>(<span class="pl-s"><span class="pl-pds">"</span>Bulevard<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Helsinki<span class="pl-pds">"</span></span>),
                                     <span class="pl-s"><span class="pl-pds">"</span>address2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Address</span>(<span class="pl-s"><span class="pl-pds">"</span>Soho<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>London<span class="pl-pds">"</span></span>)))</pre>
  </div> 
  <p>Note that when the extraction of an <code>Option[_]</code> fails, the default behavior of <code>extract</code> is to return <code>None</code>. You can make it fail with a [MappingException] instead; you can override this behavior by using a custom <code>Formats</code> object:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">formats</span><span class="pl-k">:</span> <span class="pl-en">Formats</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DefaultFormats</span> {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">strictOptionParsing</span><span class="pl-k">:</span> <span class="pl-k">Boolean</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>
}</pre>
  </div> 
  <h1><a id="user-content-serialization" class="anchor" href="https://github.com/json4s/json4s#serialization" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serialization</h1> 
  <p>Case classes can be serialized and deserialized. Please see other examples in <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/native/SerializationExamples.scala" target="_blank">SerializationExamples.scala</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.native.</span><span class="pl-v">Serialization</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.native.Serialization.</span>{<span class="pl-v">read</span>, <span class="pl-v">write</span>}

scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">Serialization</span>.formats(<span class="pl-en">NoTypeHints</span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">ser</span> <span class="pl-k">=</span> write(<span class="pl-en">Child</span>(<span class="pl-s"><span class="pl-pds">"</span>Mary<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span>, <span class="pl-c1">None</span>))

scala<span class="pl-k">&gt;</span> read[<span class="pl-en">Child</span>](ser)
res1<span class="pl-k">:</span> <span class="pl-en">Child</span> <span class="pl-k">=</span> <span class="pl-en">Child</span>(<span class="pl-en">Mary</span>,<span class="pl-c1">5</span>,<span class="pl-c1">None</span>)</pre>
  </div> 
  <p>If you're using jackson instead of the native one:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.</span><span class="pl-v">Serialization</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.jackson.Serialization.</span>{<span class="pl-v">read</span>, <span class="pl-v">write</span>}

scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">Serialization</span>.formats(<span class="pl-en">NoTypeHints</span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">ser</span> <span class="pl-k">=</span> write(<span class="pl-en">Child</span>(<span class="pl-s"><span class="pl-pds">"</span>Mary<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span>, <span class="pl-c1">None</span>))

scala<span class="pl-k">&gt;</span> read[<span class="pl-en">Child</span>](ser)
res1<span class="pl-k">:</span> <span class="pl-en">Child</span> <span class="pl-k">=</span> <span class="pl-en">Child</span>(<span class="pl-en">Mary</span>,<span class="pl-c1">5</span>,<span class="pl-c1">None</span>)</pre>
  </div> 
  <p>Serialization supports:</p> 
  <ul> 
   <li>Arbitrarily deep case-class graphs</li> 
   <li>All primitive types, including BigInt and Symbol</li> 
   <li>List, Seq, Array, Set and Map (note, keys of the Map must be strings: Map[String, _])</li> 
   <li>scala.Option</li> 
   <li>java.util.Date</li> 
   <li>Polymorphic Lists (see below)</li> 
   <li>Recursive types</li> 
   <li>Serialization of fields of a class (see below)</li> 
   <li>Custom serializer functions for types that are not supported (see below)</li> 
  </ul> 
  <p>If the class contains camel-case fields (i.e: firstLetterLowercaseAndNextWordsCapitalized) but you want to produce a json string with snake casing (i.e., separated_by_underscores), you can use the <code>snakizeKeys</code> method:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">ser</span> <span class="pl-k">=</span> write(<span class="pl-en">Person</span>(<span class="pl-s"><span class="pl-pds">"</span>Mary<span class="pl-pds">"</span></span>))
ser<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>firstName<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Mary<span class="pl-pds">"</span></span>}

scala<span class="pl-k">&gt;</span> compact(render(parse(ser).snakizeKeys))
res0<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>first_name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Mary<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <h2><a id="user-content-serializing-polymorphic-lists" class="anchor" href="https://github.com/json4s/json4s#serializing-polymorphic-lists" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serializing polymorphic Lists</h2> 
  <p>Type hints are required when serializing polymorphic (or heterogeneous) Lists. Serialized JSON objects will get an extra field named 'jsonClass' (the name can be changed by overriding 'typeHintFieldName' from Formats).</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">trait</span> <span class="pl-en">Animal</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Dog</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">Animal</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Fish</span>(<span class="pl-v">weight</span>: <span class="pl-k">Double</span>) <span class="pl-k">extends</span> <span class="pl-e">Animal</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Animals</span>(<span class="pl-v">animals</span>: <span class="pl-en">List</span>[<span class="pl-en">Animal</span>])

scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">Serialization</span>.formats(<span class="pl-en">ShortTypeHints</span>(<span class="pl-en">List</span>(<span class="pl-c1">classOf</span>[<span class="pl-en">Dog</span>], <span class="pl-c1">classOf</span>[<span class="pl-en">Fish</span>])))

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">ser</span> <span class="pl-k">=</span> write(<span class="pl-en">Animals</span>(<span class="pl-en">Dog</span>(<span class="pl-s"><span class="pl-pds">"</span>pluto<span class="pl-pds">"</span></span>) <span class="pl-k">::</span> <span class="pl-en">Fish</span>(<span class="pl-c1">1.2</span>) <span class="pl-k">::</span> <span class="pl-c1">Nil</span>))
ser<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>animals<span class="pl-pds">"</span></span><span class="pl-k">:</span>[{<span class="pl-s"><span class="pl-pds">"</span>jsonClass<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Dog<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>pluto<span class="pl-pds">"</span></span>},{<span class="pl-s"><span class="pl-pds">"</span>jsonClass<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Fish<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>weight<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">1.2</span>}]}

scala<span class="pl-k">&gt;</span> read[<span class="pl-en">Animals</span>](ser)
res0<span class="pl-k">:</span> <span class="pl-en">Animals</span> <span class="pl-k">=</span> <span class="pl-en">Animals</span>(<span class="pl-en">List</span>(<span class="pl-en">Dog</span>(pluto), <span class="pl-en">Fish</span>(<span class="pl-c1">1.2</span>)))</pre>
  </div> 
  <p>ShortTypeHints outputs the short classname for all instances of configured objects. FullTypeHints outputs the full classname. Other strategies can be implemented by extending the TypeHints trait.</p> 
  <h2><a id="user-content-serializing-fields-of-a-class" class="anchor" href="https://github.com/json4s/json4s#serializing-fields-of-a-class" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serializing fields of a class</h2> 
  <p>To enable serialization of fields, a FieldSerializer can be added for some type:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">DefaultFormats</span> <span class="pl-k">+</span> <span class="pl-en">FieldSerializer</span>[<span class="pl-en">WildDog</span>]()</pre>
  </div> 
  <p>Now the type WildDog (and all subtypes) gets serialized with all its fields (+ constructor parameters). FieldSerializer takes two optional parameters, which can be used to intercept the field serialization:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">FieldSerializer</span>[<span class="pl-en">A</span><span class="pl-k">:</span> <span class="pl-en">Manifest</span>](
  <span class="pl-v">serializer</span>:   <span class="pl-en">PartialFunction</span>[(<span class="pl-k">String</span>, <span class="pl-en">Any</span>), <span class="pl-en">Option</span>[(<span class="pl-k">String</span>, <span class="pl-en">Any</span>)]] <span class="pl-k">=</span> <span class="pl-en">Map</span>(),
  <span class="pl-v">deserializer</span>: <span class="pl-en">PartialFunction</span>[<span class="pl-en">JField</span>, <span class="pl-en">JField</span>] <span class="pl-k">=</span> <span class="pl-en">Map</span>()
)</pre>
  </div> 
  <p>Those PartialFunctions are called just before a field is serialized or deserialized. Some useful PFs to rename and ignore fields are provided:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">dogSerializer</span> <span class="pl-k">=</span> <span class="pl-en">FieldSerializer</span>[<span class="pl-en">WildDog</span>](
  renameTo(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>animalname<span class="pl-pds">"</span></span>) orElse ignore(<span class="pl-s"><span class="pl-pds">"</span>owner<span class="pl-pds">"</span></span>),
  renameFrom(<span class="pl-s"><span class="pl-pds">"</span>animalname<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>))

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">DefaultFormats</span> <span class="pl-k">+</span> dogSerializer</pre>
  </div> 
  <h2><a id="user-content-serializing-classes-defined-in-traits-or-classes" class="anchor" href="https://github.com/json4s/json4s#serializing-classes-defined-in-traits-or-classes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serializing classes defined in traits or classes</h2> 
  <p>We've added support for case classes defined in a trait. But they do need custom formats. I'll explain why and then how.</p> 
  <h5><a id="user-content-why" class="anchor" href="https://github.com/json4s/json4s#why" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why?</h5> 
  <p>For classes defined in a trait it's a bit difficult to get to their companion object, which is needed to provide default values. We could punt on those but that brings us to the next problem, that the compiler generates an extra field in the constructor of such case classes. The first field in the constructor of those case classes is called <code>$outer</code> and is of type of the <em>defining trait</em>. So somehow we need to get an instance of that object, naively we could scan all classes and collect the ones that are implementing the trait, but when there are more than one: which one to take?</p> 
  <h5><a id="user-content-how" class="anchor" href="https://github.com/json4s/json4s#how" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How?</h5> 
  <p>I've chosen to extend the formats to include a list of companion mappings for those case classes. So you can have formats that belong to your modules and keep the mappings in there. That will then make default values work and provide the much needed <code>$outer</code> field.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">SharedModule</span> {
  <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">SharedObj</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">visible</span>: <span class="pl-k">Boolean</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>)
}

<span class="pl-k">object</span> <span class="pl-en">PingPongGame</span> <span class="pl-k">extends</span> <span class="pl-e">SharedModule</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span><span class="pl-k">:</span> <span class="pl-en">Formats</span> <span class="pl-k">=</span>
  <span class="pl-en">DefaultFormats</span>.withCompanions(<span class="pl-c1">classOf</span>[<span class="pl-en">PingPongGame</span>.<span class="pl-en">SharedObj</span>] <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">PingPongGame</span>)

<span class="pl-k">val</span> <span class="pl-en">inst</span> <span class="pl-k">=</span> <span class="pl-en">PingPongGame</span>.<span class="pl-en">SharedObj</span>(<span class="pl-s"><span class="pl-pds">"</span>jeff<span class="pl-pds">"</span></span>, visible <span class="pl-k">=</span> <span class="pl-c1">true</span>)
<span class="pl-k">val</span> <span class="pl-en">extr</span> <span class="pl-k">=</span> <span class="pl-en">Extraction</span>.decompose(inst)
extr must_<span class="pl-k">==</span> <span class="pl-en">JObject</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JString</span>(<span class="pl-s"><span class="pl-pds">"</span>jeff<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>visible<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JBool</span>(<span class="pl-c1">true</span>))
extr.extract[<span class="pl-en">PingPongGame</span>.<span class="pl-en">SharedObj</span>] must_<span class="pl-k">==</span> inst</pre>
  </div> 
  <h2><a id="user-content-serializing-non-supported-types" class="anchor" href="https://github.com/json4s/json4s#serializing-non-supported-types" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serializing non-supported types</h2> 
  <p>It is possible to plug in custom serializer + deserializer functions for any type. Now, if we have a non-case class Interval (thus, not supported by default), we can still serialize it by providing following serializer.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">class</span> <span class="pl-en">Interval</span>(<span class="pl-v">start</span>: <span class="pl-k">Long</span>, <span class="pl-v">end</span>: <span class="pl-k">Long</span>) {
         <span class="pl-k">val</span> <span class="pl-en">startTime</span> <span class="pl-k">=</span> start
         <span class="pl-k">val</span> <span class="pl-en">endTime</span> <span class="pl-k">=</span> end
       }

scala<span class="pl-k">&gt;</span> <span class="pl-k">class</span> <span class="pl-en">IntervalSerializer</span> <span class="pl-k">extends</span> <span class="pl-e">CustomSerializer</span>[<span class="pl-en">Interval</span>](format <span class="pl-k">=&gt;</span> (
         {
           <span class="pl-k">case</span> <span class="pl-en">JObject</span>(<span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>start<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(s)) <span class="pl-k">::</span> <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>end<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(e)) <span class="pl-k">::</span> <span class="pl-c1">Nil</span>) <span class="pl-k">=&gt;</span>
             <span class="pl-k">new</span> <span class="pl-en">Interval</span>(s.longValue, e.longValue)
         },
         {
           <span class="pl-k">case</span> <span class="pl-v">x</span>: <span class="pl-en">Interval</span> <span class="pl-k">=&gt;</span>
             <span class="pl-en">JObject</span>(<span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>start<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(<span class="pl-en">BigInt</span>(x.startTime))) <span class="pl-k">::</span>
                     <span class="pl-en">JField</span>(<span class="pl-s"><span class="pl-pds">"</span>end<span class="pl-pds">"</span></span>,   <span class="pl-en">JInt</span>(<span class="pl-en">BigInt</span>(x.endTime))) <span class="pl-k">::</span> <span class="pl-c1">Nil</span>)
         }
       ))

scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> <span class="pl-en">Serialization</span>.formats(<span class="pl-en">NoTypeHints</span>) <span class="pl-k">+</span> <span class="pl-k">new</span> <span class="pl-en">IntervalSerializer</span></pre>
  </div> 
  <p>A custom serializer is created by providing two partial functions. The first evaluates to a value if it can unpack the data from JSON. The second creates the desired JSON if the type matches.</p> 
  <h2><a id="user-content-extensions" class="anchor" href="https://github.com/json4s/json4s#extensions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Extensions</h2> 
  <p>Module json4s-ext contains extensions to extraction and serialization. The following types are supported.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> Lift's box</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> org.json4s.<span class="pl-en">DefaultFormats</span> <span class="pl-k">+</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.native.ext.JsonBoxSerializer</span>

<span class="pl-c"><span class="pl-c">//</span> Scala enums</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> org.json4s.<span class="pl-en">DefaultFormats</span> <span class="pl-k">+</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ext.EnumSerializer</span>(<span class="pl-en">MyEnum</span>)
<span class="pl-c"><span class="pl-c">//</span> or</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> org.json4s.<span class="pl-en">DefaultFormats</span> <span class="pl-k">+</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ext.EnumNameSerializer</span>(<span class="pl-en">MyEnum</span>)

<span class="pl-c"><span class="pl-c">//</span> Joda Time</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> org.json4s.<span class="pl-en">DefaultFormats</span> <span class="pl-k">++</span> org.json4s.ext.<span class="pl-en">JodaTimeSerializers</span>.all</pre>
  </div> 
  <h1><a id="user-content-xml-support" class="anchor" href="https://github.com/json4s/json4s#xml-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>XML support</h1> 
  <p>JSON structure can be converted to XML nodes and vice versa. Please see more examples in <a href="https://github.com/json4s/json4s/blob/3.6/tests/src/test/scala/org/json4s/XmlExamples.scala" target="_blank">XmlExamples.scala</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">org.json4s.Xml.</span>{<span class="pl-v">toJson</span>, <span class="pl-v">toXml</span>}
scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">xml</span> <span class="pl-k">=</span>
         &lt;<span class="pl-ent">users</span>&gt;
           &lt;<span class="pl-ent">user</span>&gt;
             &lt;<span class="pl-ent">id</span>&gt;<span class="pl-c1">1</span>&lt;/<span class="pl-ent">id</span>&gt;
             &lt;<span class="pl-ent">name</span>&gt;<span class="pl-en">Harry</span>&lt;/<span class="pl-ent">name</span>&gt;
           &lt;/<span class="pl-ent">user</span>&gt;
           &lt;<span class="pl-ent">user</span>&gt;
             &lt;<span class="pl-ent">id</span>&gt;<span class="pl-c1">2</span>&lt;/<span class="pl-ent">id</span>&gt;
             &lt;<span class="pl-ent">name</span>&gt;<span class="pl-en">David</span>&lt;/<span class="pl-ent">name</span>&gt;
           &lt;/<span class="pl-ent">user</span>&gt;
         &lt;/<span class="pl-ent">users</span>&gt;

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> toJson(xml)
scala<span class="pl-k">&gt;</span> pretty(render(json))
res3<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span>
{
  <span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span><span class="pl-k">:</span>{
    <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span><span class="pl-k">:</span>[{
      <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Harry<span class="pl-pds">"</span></span>
    },{
      <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>David<span class="pl-pds">"</span></span>
    }]
  }
}</pre>
  </div> 
  <p>Now, the above example has two problems. First, the ID is converted to String while we might want it as an Int. This is easy to fix by mapping JString(s) to JInt(s.toInt). The second problem is more subtle. The conversion function decides to use a JSON array because there's more than one <code>user</code> element in XML. Therefore a structurally equivalent XML document which happens to have just one <code>user</code> element will generate a JSON document without a JSON array. This is rarely a desired outcome. These both problems can be fixed by the following transformation function.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> json transformField {
         <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-en">JString</span>(s)) <span class="pl-k">=&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-en">JInt</span>(s.toInt))
         <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-v">x</span>: <span class="pl-en">JObject</span>) <span class="pl-k">=&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-en">JArray</span>(x <span class="pl-k">::</span> <span class="pl-c1">Nil</span>))
       }</pre>
  </div> 
  <p>Other direction is supported too. Converting JSON to XML:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> toXml(json)
res5<span class="pl-k">:</span> scala.xml.<span class="pl-en">NodeSeq</span> <span class="pl-k">=</span> <span class="pl-en">NodeSeq</span>(&lt;<span class="pl-ent">users</span>&gt;&lt;<span class="pl-ent">user</span>&gt;&lt;<span class="pl-ent">id</span>&gt;<span class="pl-c1">1</span>&lt;/<span class="pl-ent">id</span>&gt;&lt;<span class="pl-ent">name</span>&gt;<span class="pl-en">Harry</span>&lt;/<span class="pl-ent">name</span>&gt;&lt;/<span class="pl-ent">user</span>&gt;&lt;<span class="pl-ent">user</span>&gt;&lt;<span class="pl-ent">id</span>&gt;<span class="pl-c1">2</span>&lt;/<span class="pl-ent">id</span>&gt;&lt;<span class="pl-ent">name</span>&gt;<span class="pl-en">David</span>&lt;/<span class="pl-ent">name</span>&gt;&lt;/<span class="pl-ent">user</span>&gt;&lt;/<span class="pl-ent">users</span>&gt;)</pre>
  </div> 
  <h1><a id="user-content-low-level-pull-parser-api" class="anchor" href="https://github.com/json4s/json4s#low-level-pull-parser-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Low-level pull parser API</h1> 
  <p>The pull parser API is provided for cases requiring extreme performance. It improves parsing performance in two ways. First, no intermediate AST is generated. Second, you can stop parsing at any time, skipping the rest of the stream. Note: This parsing style is recommended only as an optimization. The above-mentioned functional APIs are easier to use.</p> 
  <p>Consider the following example, which shows how to parse one field value from a big JSON:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">  {</span>
<span class="pl-s">    ...</span>
<span class="pl-s">    "firstName": "John",</span>
<span class="pl-s">    "lastName": "Smith",</span>
<span class="pl-s">    "address": {</span>
<span class="pl-s">      "streetAddress": "21 2nd Street",</span>
<span class="pl-s">      "city": "New York",</span>
<span class="pl-s">      "state": "NY",</span>
<span class="pl-s">      "postalCode": 10021</span>
<span class="pl-s">    },</span>
<span class="pl-s">    "phoneNumbers": [</span>
<span class="pl-s">      { "type": "home", "number": "212 555-1234" },</span>
<span class="pl-s">      { "type": "fax", "number": "646 555-4567" }</span>
<span class="pl-s">    ],</span>
<span class="pl-s">    ...</span>
<span class="pl-s">  }<span class="pl-pds">"""</span></span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">parser</span> <span class="pl-k">=</span> (<span class="pl-v">p</span>: <span class="pl-en">Parser</span>) <span class="pl-k">=&gt;</span> {
         <span class="pl-k">def</span> <span class="pl-en">parse</span><span class="pl-k">:</span> <span class="pl-en">BigInt</span> <span class="pl-k">=</span> p.nextToken <span class="pl-k">match</span> {
           <span class="pl-k">case</span> <span class="pl-en">FieldStart</span>(<span class="pl-s"><span class="pl-pds">"</span>postalCode<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> p.nextToken <span class="pl-k">match</span> {
             <span class="pl-k">case</span> <span class="pl-en">IntVal</span>(code) <span class="pl-k">=&gt;</span> code
             <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> p.fail(<span class="pl-s"><span class="pl-pds">"</span>expected int<span class="pl-pds">"</span></span>)
           }
           <span class="pl-k">case</span> <span class="pl-en">End</span> <span class="pl-k">=&gt;</span> p.fail(<span class="pl-s"><span class="pl-pds">"</span>no field named 'postalCode'<span class="pl-pds">"</span></span>)
           <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> parse
         }

         parse
       }

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">postalCode</span> <span class="pl-k">=</span> parse(json, parser)
postalCode<span class="pl-k">:</span> <span class="pl-en">BigInt</span> <span class="pl-k">=</span> <span class="pl-c1">10021</span></pre>
  </div> 
  <p>The pull parser is a function <code>Parser =&gt; A</code>; in this example it is concretely <code>Parser =&gt; BigInt</code>. The constructed parser recursively reads tokens until it finds a <code>FieldStart("postalCode")</code> token. After that the next token must be <code>IntVal</code>; otherwise parsing fails. It returns the parsed integer value and stops parsing immediately.</p> 
  <h1><a id="user-content-faq" class="anchor" href="https://github.com/json4s/json4s#faq" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>FAQ</h1> 
  <p>Q1: I have a JSON object and I want to extract it to a case class:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">age</span>: <span class="pl-k">Int</span>)
scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span>{"name":"joe","age":15}<span class="pl-pds">"""</span></span></pre>
  </div> 
  <p>But extraction fails:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> parse(json).extract[<span class="pl-en">Person</span>]
org.json4s.<span class="pl-en">MappingException</span><span class="pl-k">:</span> <span class="pl-en">Parsed</span> <span class="pl-en">JSON</span> values <span class="pl-k">do</span> not <span class="pl-k">match</span> <span class="pl-k">with</span> <span class="pl-e">class</span> constructor</pre>
  </div> 
  <p>A1:</p> 
  <p>Extraction does not work for classes defined in the REPL. Compile the case class definitions with scalac and import those to the REPL.</p> 
  <h1><a id="user-content-kudos" class="anchor" href="https://github.com/json4s/json4s#kudos" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Kudos</h1> 
  <ul> 
   <li> <p>The original idea for the DSL syntax was taken from the Lift mailing list (<a href="http://markmail.org/message/lniven2hn22vhupu" target="_blank">by Marius</a>).</p> </li> 
   <li> <p>The idea for the AST and rendering was taken from <a href="http://book.realworldhaskell.org/read/writing-a-library-working-with-json-data.html" target="_blank">Real World Haskell book</a>.</p> </li> 
  </ul> 
 </article>
</div>